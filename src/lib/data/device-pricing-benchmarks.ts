// ============================================================
// TERRAIN — Device & Diagnostics Pricing Benchmarks
// lib/data/device-pricing-benchmarks.ts
//
// 150+ device/diagnostic pricing benchmark records with helper
// functions for competitive pricing analysis.
//
// Sources: CMS Fee Schedule 2024, GPO contract data, hospital
// procurement surveys, SEC filings, ECRI Institute, AdvaMed
// ============================================================

import type {
  ProductCategory,
  DeviceCategory,
  DevicePricingModel,
} from '@/types/devices-diagnostics';

// ────────────────────────────────────────────────────────────
// INTERFACE
// ────────────────────────────────────────────────────────────

export interface DevicePricingBenchmark {
  device_name: string;
  company: string;
  product_category: ProductCategory;
  device_category: DeviceCategory;
  hospital_asp_usd: number;
  asp_range: { low: number; high: number };
  pricing_model: DevicePricingModel;
  year_launched?: number;
  gpo_contracted: boolean;
  reimbursement_code?: string;
  source: string;
}

// ────────────────────────────────────────────────────────────
// BENCHMARK DATA — 150+ RECORDS
// ────────────────────────────────────────────────────────────

export const DEVICE_PRICING_BENCHMARKS: DevicePricingBenchmark[] = [

  // ══════════════════════════════════════════════════════════
  // CARDIOVASCULAR (~30)
  // ══════════════════════════════════════════════════════════

  // --- TAVR Valves ---
  {
    device_name: 'SAPIEN 3 Ultra RESILIA (TAVR Valve)',
    company: 'Edwards Lifesciences',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 32500,
    asp_range: { low: 30000, high: 35000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'DRG 266/267',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Evolut PRO+ (TAVR Valve)',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 32000,
    asp_range: { low: 29500, high: 34000 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'DRG 266/267',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // --- Drug-Eluting Stents ---
  {
    device_name: 'Xience Sierra (Drug-Eluting Stent)',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 1200,
    asp_range: { low: 900, high: 1500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 92928',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Synergy Megatron (Drug-Eluting Stent)',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 1300,
    asp_range: { low: 1000, high: 1600 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 92928',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Resolute Onyx (Drug-Eluting Stent)',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 1150,
    asp_range: { low: 850, high: 1400 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 92928',
    source: 'GPO contract data; ECRI Institute pricing analysis',
  },

  // --- Electrophysiology ---
  {
    device_name: 'Farapulse PFA Ablation System',
    company: 'Boston Scientific',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 7500,
    asp_range: { low: 6000, high: 9000 },
    pricing_model: 'per_procedure',
    year_launched: 2024,
    gpo_contracted: false,
    reimbursement_code: 'CPT 93656',
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'CARTO 3 EP Mapping System',
    company: 'Biosense Webster (J&J)',
    product_category: 'device_capital_equipment',
    device_category: 'cardiovascular',
    hospital_asp_usd: 200000,
    asp_range: { low: 175000, high: 250000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; ECRI Institute',
  },
  {
    device_name: 'EnSite X EP Mapping System',
    company: 'Abbott',
    product_category: 'device_capital_equipment',
    device_category: 'cardiovascular',
    hospital_asp_usd: 180000,
    asp_range: { low: 150000, high: 220000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2021,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; ECRI Institute',
  },

  // --- Heart Failure ---
  {
    device_name: 'HeartMate 3 LVAD System',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 80000,
    asp_range: { low: 75000, high: 95000 },
    pricing_model: 'per_procedure',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'DRG 001/002',
    source: 'CMS Fee Schedule 2024; INTERMACS Registry data',
  },

  // --- CRT / ICD ---
  {
    device_name: 'Gallant CRT-D System',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 25000,
    asp_range: { low: 22000, high: 28000 },
    pricing_model: 'per_procedure',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33249',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'EMBLEM S-ICD System',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 20000,
    asp_range: { low: 18000, high: 23000 },
    pricing_model: 'per_procedure',
    year_launched: 2015,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33270',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },

  // --- Structural Heart ---
  {
    device_name: 'MitraClip G4 (TEER System)',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 30000,
    asp_range: { low: 27000, high: 33000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'DRG 273',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'WATCHMAN FLX Left Atrial Appendage Closure',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 15000,
    asp_range: { low: 13000, high: 17000 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33340',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // --- Cardiac Leads & Catheters ---
  {
    device_name: 'SelectSecure MRI SureScan Lead',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 2500,
    asp_range: { low: 2000, high: 3200 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33216',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Swan-Ganz Hemodynamic Monitoring Catheter',
    company: 'Edwards Lifesciences',
    product_category: 'device_monitoring',
    device_category: 'cardiovascular',
    hospital_asp_usd: 800,
    asp_range: { low: 600, high: 1100 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'CPT 93503',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },

  // --- Thrombectomy / Vascular ---
  {
    device_name: 'Penumbra System (Mechanical Thrombectomy)',
    company: 'Penumbra',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 6000,
    asp_range: { low: 5000, high: 7500 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 37184',
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Cardiohelp ECMO Circuit System',
    company: 'Getinge (Maquet)',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 5000,
    asp_range: { low: 4000, high: 6500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33947',
    source: 'Hospital procurement surveys; ECRI Institute',
  },

  // --- PCI Accessories ---
  {
    device_name: 'Launcher Guide Catheter (PCI)',
    company: 'Medtronic',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 150,
    asp_range: { low: 80, high: 250 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2016,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Emerge PTCA Balloon Catheter',
    company: 'Boston Scientific',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 600,
    asp_range: { low: 400, high: 800 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'CPT 92920',
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Intravascular Imaging ---
  {
    device_name: 'OptiCross HD IVUS Catheter',
    company: 'Boston Scientific',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 800,
    asp_range: { low: 600, high: 1100 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2021,
    gpo_contracted: true,
    reimbursement_code: 'CPT 92978',
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Additional Cardiovascular ---
  {
    device_name: 'Impella CP Heart Pump',
    company: 'Abiomed (J&J)',
    product_category: 'device_surgical',
    device_category: 'cardiovascular',
    hospital_asp_usd: 25000,
    asp_range: { low: 22000, high: 28000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33990',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'ACURATE neo2 Aortic Valve System',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 31000,
    asp_range: { low: 28000, high: 34000 },
    pricing_model: 'per_procedure',
    year_launched: 2023,
    gpo_contracted: false,
    reimbursement_code: 'DRG 266/267',
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Micra AV Leadless Pacemaker',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 18000,
    asp_range: { low: 15000, high: 21000 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33274',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'AVEIR DR Leadless Pacemaker',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 19000,
    asp_range: { low: 16000, high: 22000 },
    pricing_model: 'per_procedure',
    year_launched: 2024,
    gpo_contracted: false,
    reimbursement_code: 'CPT 33274',
    source: 'Hospital procurement surveys; SEC filings',
  },

  // ══════════════════════════════════════════════════════════
  // ORTHOPEDICS (~25)
  // ══════════════════════════════════════════════════════════

  // --- Total Knee ---
  {
    device_name: 'Persona Total Knee System',
    company: 'Zimmer Biomet',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 6500,
    asp_range: { low: 5200, high: 7800 },
    pricing_model: 'per_procedure',
    year_launched: 2012,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Triathlon Total Knee System',
    company: 'Stryker',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 6800,
    asp_range: { low: 5500, high: 8200 },
    pricing_model: 'per_procedure',
    year_launched: 2004,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'ATTUNE Total Knee System',
    company: 'DePuy Synthes (J&J)',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 6200,
    asp_range: { low: 5000, high: 7500 },
    pricing_model: 'per_procedure',
    year_launched: 2013,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Total Hip ---
  {
    device_name: 'Taperloc Complete Hip System',
    company: 'Zimmer Biomet',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 5500,
    asp_range: { low: 4500, high: 7000 },
    pricing_model: 'per_procedure',
    year_launched: 2009,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Accolade II Total Hip System',
    company: 'Stryker',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 6200,
    asp_range: { low: 5000, high: 7500 },
    pricing_model: 'per_procedure',
    year_launched: 2016,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Corail/Pinnacle THA System',
    company: 'DePuy Synthes (J&J)',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 5800,
    asp_range: { low: 4800, high: 7200 },
    pricing_model: 'per_procedure',
    year_launched: 2008,
    gpo_contracted: true,
    reimbursement_code: 'DRG 470',
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Robotic Platforms ---
  {
    device_name: 'Mako SmartRobotics System',
    company: 'Stryker',
    product_category: 'device_capital_equipment',
    device_category: 'orthopedic',
    hospital_asp_usd: 1500000,
    asp_range: { low: 1200000, high: 1800000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2015,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'ROSA Knee/Spine Robot',
    company: 'Zimmer Biomet',
    product_category: 'device_capital_equipment',
    device_category: 'orthopedic',
    hospital_asp_usd: 900000,
    asp_range: { low: 750000, high: 1100000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'VELYS Robotic-Assisted Solution',
    company: 'DePuy Synthes (J&J)',
    product_category: 'device_capital_equipment',
    device_category: 'orthopedic',
    hospital_asp_usd: 1000000,
    asp_range: { low: 800000, high: 1200000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2022,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Spine ---
  {
    device_name: 'CD Horizon Spinal Fusion System (per level)',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 12000,
    asp_range: { low: 9000, high: 15000 },
    pricing_model: 'per_procedure',
    year_launched: 2015,
    gpo_contracted: true,
    reimbursement_code: 'DRG 459/460',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Precept Spinal Fusion System (per level)',
    company: 'NuVasive',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 10000,
    asp_range: { low: 8000, high: 13000 },
    pricing_model: 'per_procedure',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'DRG 459/460',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'COALESCE TLIF Interbody Cage',
    company: 'NuVasive',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 3500,
    asp_range: { low: 2500, high: 4800 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'SOLERA Pedicle Screw System',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 4000,
    asp_range: { low: 3000, high: 5500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2016,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Sports Medicine ---
  {
    device_name: 'HEALIX ADVANCE Suture Anchor',
    company: 'DePuy Synthes (J&J)',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 400,
    asp_range: { low: 250, high: 550 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 29806',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'GraftLink ACL Reconstruction System',
    company: 'Arthrex',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 2000,
    asp_range: { low: 1500, high: 2800 },
    pricing_model: 'per_procedure',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'CPT 29888',
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Shoulder / Trauma ---
  {
    device_name: 'Comprehensive Reverse Shoulder System',
    company: 'Zimmer Biomet',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 8000,
    asp_range: { low: 6500, high: 10000 },
    pricing_model: 'per_procedure',
    year_launched: 2014,
    gpo_contracted: true,
    reimbursement_code: 'DRG 483',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Periarticular Trauma Plate System',
    company: 'Stryker',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 3000,
    asp_range: { low: 2000, high: 4500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2016,
    gpo_contracted: true,
    reimbursement_code: 'CPT 27244',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'VITOSS Bone Graft Substitute',
    company: 'Stryker',
    product_category: 'device_implantable',
    device_category: 'orthopedic',
    hospital_asp_usd: 1500,
    asp_range: { low: 1000, high: 2200 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2015,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // ══════════════════════════════════════════════════════════
  // NEUROLOGY / NEUROMODULATION (~20)
  // ══════════════════════════════════════════════════════════

  // --- Deep Brain Stimulation ---
  {
    device_name: 'Percept PC DBS System',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 35000,
    asp_range: { low: 30000, high: 40000 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61867/61868',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Infinity DBS System',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 33000,
    asp_range: { low: 28000, high: 38000 },
    pricing_model: 'per_procedure',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61867/61868',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'Vercise Genus DBS System',
    company: 'Boston Scientific',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 32000,
    asp_range: { low: 27000, high: 37000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61867/61868',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // --- Spinal Cord Stimulation ---
  {
    device_name: 'HFX iQ SCS System',
    company: 'Nevro',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 28000,
    asp_range: { low: 24000, high: 33000 },
    pricing_model: 'per_procedure',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 63685',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Intellis SCS System',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 27000,
    asp_range: { low: 23000, high: 32000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 63685',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // --- VNS / RNS ---
  {
    device_name: 'VNS Therapy System (SenTiva)',
    company: 'LivaNova',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 30000,
    asp_range: { low: 26000, high: 34000 },
    pricing_model: 'per_procedure',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 64568',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'RNS System (NeuroPace)',
    company: 'NeuroPace',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 40000,
    asp_range: { low: 35000, high: 45000 },
    pricing_model: 'per_procedure',
    year_launched: 2013,
    gpo_contracted: false,
    reimbursement_code: 'CPT 61850',
    source: 'CMS Fee Schedule 2024; SEC filings',
  },

  // --- Neurovascular ---
  {
    device_name: 'Pipeline Flex Embolization Device',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 8000,
    asp_range: { low: 7000, high: 10000 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61624',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'FRED Flow Re-Direction Endoluminal Device',
    company: 'MicroVention (Terumo)',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 7500,
    asp_range: { low: 6500, high: 9000 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61624',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Target Detachable Coils',
    company: 'Stryker Neurovascular',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 1200,
    asp_range: { low: 900, high: 1600 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 61710',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Solitaire X Stent Retriever',
    company: 'Medtronic',
    product_category: 'device_surgical',
    device_category: 'neurology',
    hospital_asp_usd: 6000,
    asp_range: { low: 5000, high: 7500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 37184',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },

  // --- Sacral Neuromodulation / Other Neuro ---
  {
    device_name: 'InterStim X Sacral Neuromodulation System',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 22000,
    asp_range: { low: 18000, high: 26000 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: true,
    reimbursement_code: 'CPT 64590',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'Codman CERTAS Plus CSF Shunt System',
    company: 'Integra LifeSciences',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 2500,
    asp_range: { low: 2000, high: 3500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2016,
    gpo_contracted: true,
    reimbursement_code: 'CPT 62223',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Cranial Fixation/Plating System',
    company: 'Stryker (Leibinger)',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 1000,
    asp_range: { low: 700, high: 1500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2015,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Axium DRG Neurostimulator',
    company: 'Abbott',
    product_category: 'device_implantable',
    device_category: 'neurology',
    hospital_asp_usd: 26000,
    asp_range: { low: 22000, high: 30000 },
    pricing_model: 'per_procedure',
    year_launched: 2016,
    gpo_contracted: true,
    reimbursement_code: 'CPT 63685',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // ══════════════════════════════════════════════════════════
  // DIAGNOSTICS / IVD (~30)
  // ══════════════════════════════════════════════════════════

  // --- NGS Platforms ---
  {
    device_name: 'NovaSeq X Plus Sequencing System',
    company: 'Illumina',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_genetics',
    hospital_asp_usd: 985000,
    asp_range: { low: 900000, high: 1100000 },
    pricing_model: 'reagent_rental',
    year_launched: 2023,
    gpo_contracted: false,
    source: 'Illumina published pricing; SEC filings',
  },
  {
    device_name: 'MiSeq Dx Sequencing System',
    company: 'Illumina',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_genetics',
    hospital_asp_usd: 125000,
    asp_range: { low: 99000, high: 150000 },
    pricing_model: 'reagent_rental',
    year_launched: 2013,
    gpo_contracted: true,
    source: 'Illumina published pricing; hospital procurement surveys',
  },
  {
    device_name: 'Ion Torrent Genexus System',
    company: 'Thermo Fisher Scientific',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_genetics',
    hospital_asp_usd: 295000,
    asp_range: { low: 250000, high: 350000 },
    pricing_model: 'reagent_rental',
    year_launched: 2020,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- PCR Systems ---
  {
    device_name: 'ID NOW Molecular Platform',
    company: 'Abbott',
    product_category: 'device_point_of_care',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 2500,
    asp_range: { low: 2000, high: 3500 },
    pricing_model: 'reagent_rental',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'GeneXpert System (4-module)',
    company: 'Cepheid (Danaher)',
    product_category: 'device_point_of_care',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 17000,
    asp_range: { low: 14000, high: 22000 },
    pricing_model: 'reagent_rental',
    year_launched: 2016,
    gpo_contracted: true,
    source: 'GPO contract data; ECRI Institute',
  },
  {
    device_name: 'BioFire FilmArray Torch',
    company: 'bioMerieux',
    product_category: 'device_point_of_care',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 55000,
    asp_range: { low: 45000, high: 65000 },
    pricing_model: 'reagent_rental',
    year_launched: 2021,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Liquid Biopsy / Genomics Tests ---
  {
    device_name: 'Guardant360 CDx (Liquid Biopsy)',
    company: 'Guardant Health',
    product_category: 'diagnostics_companion',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 5800,
    asp_range: { low: 3500, high: 5800 },
    pricing_model: 'per_test',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81479 (unlisted) / MolDx',
    source: 'CMS Fee Schedule 2024; MolDx coverage determinations',
  },
  {
    device_name: 'FoundationOne Liquid CDx',
    company: 'Foundation Medicine (Roche)',
    product_category: 'diagnostics_companion',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 5000,
    asp_range: { low: 3500, high: 5800 },
    pricing_model: 'per_test',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0239U',
    source: 'CMS Fee Schedule 2024; MolDx coverage determinations',
  },
  {
    device_name: 'FoundationOne CDx (Tissue)',
    company: 'Foundation Medicine (Roche)',
    product_category: 'diagnostics_companion',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 5800,
    asp_range: { low: 3500, high: 5800 },
    pricing_model: 'per_test',
    year_launched: 2017,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0037U',
    source: 'CMS Fee Schedule 2024; NCD 90.2 (NGS for cancer)',
  },

  // --- CGM Sensors ---
  {
    device_name: 'Dexcom G7 CGM Sensor',
    company: 'Dexcom',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 75,
    asp_range: { low: 60, high: 90 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS K0553/K0554',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'FreeStyle Libre 3 Sensor',
    company: 'Abbott',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 60,
    asp_range: { low: 45, high: 75 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS K0553/K0554',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'Stelo CGM Sensor (OTC)',
    company: 'Dexcom',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 49,
    asp_range: { low: 40, high: 60 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2024,
    gpo_contracted: false,
    source: 'Manufacturer published pricing',
  },

  // --- IHC / Tissue Diagnostics ---
  {
    device_name: 'VENTANA BenchMark ULTRA IHC/ISH Platform',
    company: 'Roche Diagnostics',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 150000,
    asp_range: { low: 120000, high: 180000 },
    pricing_model: 'reagent_rental',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; ECRI Institute',
  },

  // --- Flow Cytometry ---
  {
    device_name: 'FACSLyric Flow Cytometer',
    company: 'BD Biosciences',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 250000,
    asp_range: { low: 200000, high: 300000 },
    pricing_model: 'reagent_rental',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; ECRI Institute',
  },

  // --- Hematology ---
  {
    device_name: 'Sysmex XN-3100 Hematology Analyzer',
    company: 'Sysmex',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 85000,
    asp_range: { low: 70000, high: 100000 },
    pricing_model: 'reagent_rental',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },

  // --- Chemistry Analyzers ---
  {
    device_name: 'cobas c 702 Chemistry Analyzer',
    company: 'Roche Diagnostics',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_cardiology',
    hospital_asp_usd: 200000,
    asp_range: { low: 160000, high: 250000 },
    pricing_model: 'reagent_rental',
    year_launched: 2017,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },

  // --- Rapid Antigen Tests ---
  {
    device_name: 'BinaxNOW Rapid Antigen Test',
    company: 'Abbott',
    product_category: 'device_point_of_care',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 8,
    asp_range: { low: 5, high: 12 },
    pricing_model: 'per_test',
    year_launched: 2020,
    gpo_contracted: true,
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },

  // --- Blood Gas ---
  {
    device_name: 'GEM Premier 5000 Blood Gas Analyzer',
    company: 'Werfen (IL)',
    product_category: 'device_point_of_care',
    device_category: 'ivd_cardiology',
    hospital_asp_usd: 35000,
    asp_range: { low: 28000, high: 42000 },
    pricing_model: 'reagent_rental',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },

  // --- Urinalysis ---
  {
    device_name: 'Atellica 1500 Urinalysis System',
    company: 'Siemens Healthineers',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 15000,
    asp_range: { low: 12000, high: 20000 },
    pricing_model: 'reagent_rental',
    year_launched: 2020,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },

  // --- POC Coagulation ---
  {
    device_name: 'i-STAT Alinity POC Coagulation System',
    company: 'Abbott',
    product_category: 'device_point_of_care',
    device_category: 'ivd_cardiology',
    hospital_asp_usd: 5000,
    asp_range: { low: 4000, high: 7000 },
    pricing_model: 'reagent_rental',
    year_launched: 2021,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Blood Culture ---
  {
    device_name: 'BACTEC FX40 Blood Culture System',
    company: 'BD Diagnostics',
    product_category: 'device_capital_equipment',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 80000,
    asp_range: { low: 65000, high: 95000 },
    pricing_model: 'reagent_rental',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },

  // --- Additional Diagnostics ---
  {
    device_name: 'Oncotype DX Breast Recurrence Score',
    company: 'Exact Sciences',
    product_category: 'diagnostics_ivd',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 4620,
    asp_range: { low: 3500, high: 4620 },
    pricing_model: 'per_test',
    year_launched: 2004,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81519',
    source: 'CMS Fee Schedule 2024; NCD 90.2',
  },
  {
    device_name: 'Cologuard Plus (mtsDNA Stool Test)',
    company: 'Exact Sciences',
    product_category: 'diagnostics_ivd',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 502,
    asp_range: { low: 400, high: 600 },
    pricing_model: 'per_test',
    year_launched: 2024,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81528',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'Signatera MRD Assay',
    company: 'Natera',
    product_category: 'diagnostics_ivd',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 3300,
    asp_range: { low: 2500, high: 3800 },
    pricing_model: 'per_test',
    year_launched: 2021,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81479',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'VENTANA PD-L1 (SP263) Assay',
    company: 'Roche/Ventana',
    product_category: 'diagnostics_companion',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 250,
    asp_range: { low: 180, high: 350 },
    pricing_model: 'per_test',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 88360',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'PD-L1 IHC 22C3 pharmDx Assay',
    company: 'Agilent (Dako)',
    product_category: 'diagnostics_companion',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 240,
    asp_range: { low: 170, high: 330 },
    pricing_model: 'per_test',
    year_launched: 2015,
    gpo_contracted: true,
    reimbursement_code: 'CPT 88360',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Prosigna PAM50 Breast Cancer Assay',
    company: 'Veracyte',
    product_category: 'diagnostics_ivd',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 3400,
    asp_range: { low: 2500, high: 3800 },
    pricing_model: 'per_test',
    year_launched: 2013,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81520',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },

  // ══════════════════════════════════════════════════════════
  // SaMD / DIGITAL HEALTH (~15)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'Viz.ai LVO Stroke Detection',
    company: 'Viz.ai',
    product_category: 'device_digital_health',
    device_category: 'neurology',
    hospital_asp_usd: 500,
    asp_range: { low: 350, high: 700 },
    pricing_model: 'per_procedure',
    year_launched: 2018,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0623T (NTAP)',
    source: 'CMS NTAP determinations 2024; SEC filings',
  },
  {
    device_name: 'Aidoc AI Radiology Triage',
    company: 'Aidoc',
    product_category: 'device_digital_health',
    device_category: 'imaging_radiology',
    hospital_asp_usd: 120000,
    asp_range: { low: 80000, high: 180000 },
    pricing_model: 'subscription_samd',
    year_launched: 2019,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; company disclosures',
  },
  {
    device_name: 'reSET-O Digital Therapeutic (Opioid Use Disorder)',
    company: 'Pear Therapeutics',
    product_category: 'device_digital_health',
    device_category: 'neurology',
    hospital_asp_usd: 1700,
    asp_range: { low: 1200, high: 2000 },
    pricing_model: 'per_patient_year',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0702T/0703T',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'RPM Cardiac Monitoring Platform',
    company: 'Various (Philips, Biobeat)',
    product_category: 'device_digital_health',
    device_category: 'cardiovascular',
    hospital_asp_usd: 150,
    asp_range: { low: 80, high: 250 },
    pricing_model: 'per_patient_year',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 99453/99457/99458',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Clinical Decision Support Platform',
    company: 'Various (Epic, Zynx Health)',
    product_category: 'device_digital_health',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 50000,
    asp_range: { low: 30000, high: 100000 },
    pricing_model: 'subscription_samd',
    year_launched: 2019,
    gpo_contracted: false,
    source: 'Hospital procurement surveys',
  },
  {
    device_name: 'Paige Prostate AI Pathology',
    company: 'Paige AI',
    product_category: 'device_digital_health',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 200,
    asp_range: { low: 150, high: 300 },
    pricing_model: 'per_test',
    year_launched: 2021,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0112U',
    source: 'CMS Fee Schedule 2024; SEC filings',
  },
  {
    device_name: 'Zio AT Extended Cardiac Monitor',
    company: 'iRhythm Technologies',
    product_category: 'device_monitoring',
    device_category: 'cardiovascular',
    hospital_asp_usd: 340,
    asp_range: { low: 280, high: 420 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: false,
    reimbursement_code: 'CPT 93247',
    source: 'CMS Fee Schedule 2024; SEC filings',
  },
  {
    device_name: 'Surgical AI Planning Platform (Orthopedic)',
    company: 'Various (Materialise, Smith+Nephew)',
    product_category: 'device_digital_health',
    device_category: 'orthopedic',
    hospital_asp_usd: 1000,
    asp_range: { low: 600, high: 1500 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: false,
    source: 'Hospital procurement surveys',
  },
  {
    device_name: 'InPen Diabetes Management SaMD',
    company: 'Medtronic',
    product_category: 'device_digital_health',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 60,
    asp_range: { low: 40, high: 80 },
    pricing_model: 'per_patient_year',
    year_launched: 2019,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS A9274',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'Telehealth Enterprise Platform',
    company: 'Various (Teladoc, Amwell)',
    product_category: 'device_digital_health',
    device_category: 'neurology',
    hospital_asp_usd: 200000,
    asp_range: { low: 100000, high: 350000 },
    pricing_model: 'subscription_samd',
    year_launched: 2018,
    gpo_contracted: false,
    source: 'Hospital procurement surveys',
  },
  {
    device_name: 'Caption Health AI Echocardiography',
    company: 'Caption Health (GE)',
    product_category: 'device_digital_health',
    device_category: 'cardiovascular',
    hospital_asp_usd: 100000,
    asp_range: { low: 70000, high: 150000 },
    pricing_model: 'subscription_samd',
    year_launched: 2021,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Tempus xT Oncology Platform',
    company: 'Tempus AI',
    product_category: 'device_digital_health',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 5000,
    asp_range: { low: 3500, high: 6500 },
    pricing_model: 'per_test',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 81455',
    source: 'CMS Fee Schedule 2024; company disclosures',
  },
  {
    device_name: 'RhythmAnalytics AI ECG Interpretation',
    company: 'Cardiologs (Philips)',
    product_category: 'device_digital_health',
    device_category: 'cardiovascular',
    hospital_asp_usd: 85000,
    asp_range: { low: 60000, high: 120000 },
    pricing_model: 'subscription_samd',
    year_launched: 2020,
    gpo_contracted: false,
    source: 'Hospital procurement surveys',
  },
  {
    device_name: 'IDx-DR Autonomous Diabetic Retinopathy AI',
    company: 'Digital Diagnostics',
    product_category: 'device_digital_health',
    device_category: 'ophthalmology',
    hospital_asp_usd: 45,
    asp_range: { low: 30, high: 65 },
    pricing_model: 'per_test',
    year_launched: 2018,
    gpo_contracted: false,
    reimbursement_code: 'CPT 92229',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },

  // ══════════════════════════════════════════════════════════
  // SURGICAL ROBOTS (~6)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'da Vinci Xi Surgical System',
    company: 'Intuitive Surgical',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 2000000,
    asp_range: { low: 1700000, high: 2500000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2014,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'da Vinci 5 Surgical System',
    company: 'Intuitive Surgical',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 2300000,
    asp_range: { low: 2000000, high: 2800000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2024,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Hugo RAS Robotic-Assisted Surgery',
    company: 'Medtronic',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 1500000,
    asp_range: { low: 1200000, high: 1800000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2023,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Ion Endoluminal Robotic Bronchoscopy',
    company: 'Intuitive Surgical',
    product_category: 'device_capital_equipment',
    device_category: 'respiratory',
    hospital_asp_usd: 800000,
    asp_range: { low: 650000, high: 950000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2021,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Monarch Robotic Bronchoscopy Platform',
    company: 'J&J (Auris Health)',
    product_category: 'device_capital_equipment',
    device_category: 'respiratory',
    hospital_asp_usd: 750000,
    asp_range: { low: 600000, high: 900000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2020,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Versius Surgical Robotic System',
    company: 'CMR Surgical',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 1200000,
    asp_range: { low: 900000, high: 1500000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2022,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; company disclosures',
  },

  // ══════════════════════════════════════════════════════════
  // ENDOSCOPY (~5)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'EVIS X1 Endoscope System',
    company: 'Olympus',
    product_category: 'device_capital_equipment',
    device_category: 'endoscopy_gi',
    hospital_asp_usd: 30000,
    asp_range: { low: 25000, high: 38000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2020,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'ELUXEO 700 Endoscope System',
    company: 'Fujifilm',
    product_category: 'device_capital_equipment',
    device_category: 'endoscopy_gi',
    hospital_asp_usd: 28000,
    asp_range: { low: 22000, high: 35000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'PillCam SB 3 Capsule Endoscopy',
    company: 'Medtronic',
    product_category: 'device_surgical',
    device_category: 'endoscopy_gi',
    hospital_asp_usd: 500,
    asp_range: { low: 400, high: 650 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'CPT 91110',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },
  {
    device_name: 'SpyGlass DS II Cholangioscopy',
    company: 'Boston Scientific',
    product_category: 'device_surgical',
    device_category: 'endoscopy_gi',
    hospital_asp_usd: 3500,
    asp_range: { low: 2800, high: 4500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2019,
    gpo_contracted: true,
    reimbursement_code: 'CPT 47552',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'ENDOCUFF VISION Colonoscopy Assist',
    company: 'Olympus',
    product_category: 'device_surgical',
    device_category: 'endoscopy_gi',
    hospital_asp_usd: 35,
    asp_range: { low: 25, high: 50 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // ══════════════════════════════════════════════════════════
  // RESPIRATORY (~4)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'Hamilton C6 Ventilator',
    company: 'Hamilton Medical',
    product_category: 'device_capital_equipment',
    device_category: 'respiratory',
    hospital_asp_usd: 35000,
    asp_range: { low: 28000, high: 45000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2020,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'Servo-u Ventilator',
    company: 'Getinge',
    product_category: 'device_capital_equipment',
    device_category: 'respiratory',
    hospital_asp_usd: 30000,
    asp_range: { low: 24000, high: 38000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'AirSense 11 CPAP/AutoSet',
    company: 'ResMed',
    product_category: 'device_monitoring',
    device_category: 'respiratory',
    hospital_asp_usd: 800,
    asp_range: { low: 600, high: 1100 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2021,
    gpo_contracted: true,
    reimbursement_code: 'HCPCS E0601',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'DreamStation 2 BiPAP',
    company: 'Philips Respironics',
    product_category: 'device_monitoring',
    device_category: 'respiratory',
    hospital_asp_usd: 1200,
    asp_range: { low: 900, high: 1600 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'HCPCS E0471',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },

  // ══════════════════════════════════════════════════════════
  // OPHTHALMOLOGY (~5)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'AcrySof IQ Monofocal IOL (Standard)',
    company: 'Alcon',
    product_category: 'device_implantable',
    device_category: 'ophthalmology',
    hospital_asp_usd: 150,
    asp_range: { low: 100, high: 250 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2009,
    gpo_contracted: true,
    reimbursement_code: 'CPT 66984',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'PanOptix Trifocal IOL (Premium)',
    company: 'Alcon',
    product_category: 'device_implantable',
    device_category: 'ophthalmology',
    hospital_asp_usd: 2500,
    asp_range: { low: 2000, high: 3200 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2019,
    gpo_contracted: false,
    reimbursement_code: 'CPT 66984 + V2788',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'Vivity Extended Depth of Focus IOL',
    company: 'Alcon',
    product_category: 'device_implantable',
    device_category: 'ophthalmology',
    hospital_asp_usd: 2200,
    asp_range: { low: 1800, high: 2800 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 66984 + V2788',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'LenSx Femtosecond Laser System',
    company: 'Alcon',
    product_category: 'device_capital_equipment',
    device_category: 'ophthalmology',
    hospital_asp_usd: 500000,
    asp_range: { low: 400000, high: 600000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2012,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; ECRI Institute',
  },
  {
    device_name: 'iStent inject W (MIGS Glaucoma)',
    company: 'Glaukos',
    product_category: 'device_implantable',
    device_category: 'ophthalmology',
    hospital_asp_usd: 1200,
    asp_range: { low: 900, high: 1600 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 66991',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },

  // ══════════════════════════════════════════════════════════
  // WOUND CARE / SURGICAL ENERGY / OTHER (~25+)
  // ══════════════════════════════════════════════════════════

  {
    device_name: 'V.A.C. ULTA Negative Pressure Wound Therapy',
    company: 'KCI (3M)',
    product_category: 'device_monitoring',
    device_category: 'wound_care',
    hospital_asp_usd: 150,
    asp_range: { low: 100, high: 200 },
    pricing_model: 'per_patient_year',
    year_launched: 2018,
    gpo_contracted: true,
    reimbursement_code: 'HCPCS A6550',
    source: 'CMS DMEPOS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'Prevena Incision Management System',
    company: 'KCI (3M)',
    product_category: 'device_surgical',
    device_category: 'wound_care',
    hospital_asp_usd: 350,
    asp_range: { low: 250, high: 500 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Surgical Staplers ---
  {
    device_name: 'Echelon Flex Powered Endoscopic Stapler',
    company: 'Ethicon (J&J)',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 400,
    asp_range: { low: 300, high: 550 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Signia Powered Stapling System',
    company: 'Medtronic',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 450,
    asp_range: { low: 350, high: 600 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2020,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Energy Devices ---
  {
    device_name: 'Harmonic HD 1000i Shears',
    company: 'Ethicon (J&J)',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 600,
    asp_range: { low: 450, high: 800 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'LigaSure Maryland Jaw Sealer/Divider',
    company: 'Medtronic',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 500,
    asp_range: { low: 350, high: 650 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2017,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Surgical Smoke / Safety ---
  {
    device_name: 'PlumeSafe Turbo Surgical Smoke Evacuator',
    company: 'Buffalo Filter',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 3000,
    asp_range: { low: 2200, high: 4000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Patient Warming ---
  {
    device_name: 'Bair Hugger Patient Warming Blanket',
    company: '3M',
    product_category: 'device_surgical',
    device_category: 'general_surgery',
    hospital_asp_usd: 50,
    asp_range: { low: 30, high: 75 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2015,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Infusion Pumps ---
  {
    device_name: 'Alaris Infusion Pump System',
    company: 'BD',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 5000,
    asp_range: { low: 3500, high: 7000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Plum 360 Infusion Pump',
    company: 'ICU Medical',
    product_category: 'device_capital_equipment',
    device_category: 'general_surgery',
    hospital_asp_usd: 4800,
    asp_range: { low: 3500, high: 6500 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'GPO contract data; hospital procurement surveys',
  },

  // --- Dialysis ---
  {
    device_name: 'NxStage System One Hemodialysis',
    company: 'Fresenius Medical Care',
    product_category: 'device_capital_equipment',
    device_category: 'renal_dialysis',
    hospital_asp_usd: 25000,
    asp_range: { low: 20000, high: 32000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2017,
    gpo_contracted: true,
    reimbursement_code: 'CPT 90935/90937',
    source: 'CMS Fee Schedule 2024; hospital procurement surveys',
  },
  {
    device_name: 'Tablo Hemodialysis System',
    company: 'Outset Medical (Baxter)',
    product_category: 'device_capital_equipment',
    device_category: 'renal_dialysis',
    hospital_asp_usd: 28000,
    asp_range: { low: 22000, high: 35000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2020,
    gpo_contracted: false,
    reimbursement_code: 'CPT 90935/90937',
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Oncology Radiation ---
  {
    device_name: 'Halcyon Radiation Therapy System',
    company: 'Varian (Siemens)',
    product_category: 'device_capital_equipment',
    device_category: 'oncology_radiation',
    hospital_asp_usd: 4500000,
    asp_range: { low: 3500000, high: 5500000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2017,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'TrueBeam Linear Accelerator',
    company: 'Varian (Siemens)',
    product_category: 'device_capital_equipment',
    device_category: 'oncology_radiation',
    hospital_asp_usd: 5000000,
    asp_range: { low: 4000000, high: 6000000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2010,
    gpo_contracted: false,
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Vascular ---
  {
    device_name: 'Gore EXCLUDER AAA Endoprosthesis',
    company: 'W.L. Gore',
    product_category: 'device_implantable',
    device_category: 'vascular',
    hospital_asp_usd: 12000,
    asp_range: { low: 10000, high: 15000 },
    pricing_model: 'per_procedure',
    year_launched: 2014,
    gpo_contracted: true,
    reimbursement_code: 'DRG 252',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'AngioVac Venous Drainage Cannula',
    company: 'AngioDynamics',
    product_category: 'device_surgical',
    device_category: 'vascular',
    hospital_asp_usd: 6500,
    asp_range: { low: 5000, high: 8000 },
    pricing_model: 'per_procedure',
    year_launched: 2018,
    gpo_contracted: false,
    reimbursement_code: 'CPT 37187',
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Insulin Pumps ---
  {
    device_name: 'Omnipod 5 Insulin Pump System',
    company: 'Insulet',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 30,
    asp_range: { low: 25, high: 40 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2022,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS A9274',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 't:slim X2 Insulin Pump',
    company: 'Tandem Diabetes Care',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 4000,
    asp_range: { low: 3000, high: 5000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS E0784',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },

  // --- ENT ---
  {
    device_name: 'Cochlear Nucleus 8 Sound Processor',
    company: 'Cochlear',
    product_category: 'device_implantable',
    device_category: 'ent',
    hospital_asp_usd: 30000,
    asp_range: { low: 25000, high: 36000 },
    pricing_model: 'per_procedure',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 69930',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'PROPEL Sinus Stent',
    company: 'Intersect ENT (Medtronic)',
    product_category: 'device_implantable',
    device_category: 'ent',
    hospital_asp_usd: 1400,
    asp_range: { low: 1000, high: 1800 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2016,
    gpo_contracted: true,
    reimbursement_code: 'CPT 31299',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },

  // --- Urology ---
  {
    device_name: 'UroLift System (BPH Treatment)',
    company: 'Teleflex',
    product_category: 'device_implantable',
    device_category: 'urology',
    hospital_asp_usd: 3500,
    asp_range: { low: 2800, high: 4500 },
    pricing_model: 'per_procedure',
    year_launched: 2013,
    gpo_contracted: true,
    reimbursement_code: 'CPT 52441/52442',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'Rezum Water Vapor Therapy',
    company: 'Boston Scientific',
    product_category: 'device_surgical',
    device_category: 'urology',
    hospital_asp_usd: 2800,
    asp_range: { low: 2200, high: 3500 },
    pricing_model: 'per_procedure',
    year_launched: 2015,
    gpo_contracted: true,
    reimbursement_code: 'CPT 53854',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },

  // --- Dermatology ---
  {
    device_name: 'CoolSculpting Elite Body Contouring',
    company: 'Allergan Aesthetics (AbbVie)',
    product_category: 'device_surgical',
    device_category: 'dermatology',
    hospital_asp_usd: 1200,
    asp_range: { low: 800, high: 1800 },
    pricing_model: 'per_procedure',
    year_launched: 2020,
    gpo_contracted: false,
    source: 'Manufacturer pricing; practice surveys',
  },

  // --- Imaging / Radiology Capital ---
  {
    device_name: 'SIGNA Hero 3T MRI',
    company: 'GE HealthCare',
    product_category: 'device_capital_equipment',
    device_category: 'imaging_radiology',
    hospital_asp_usd: 2500000,
    asp_range: { low: 2000000, high: 3200000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2023,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },
  {
    device_name: 'Revolution Apex CT Scanner',
    company: 'GE HealthCare',
    product_category: 'device_capital_equipment',
    device_category: 'imaging_radiology',
    hospital_asp_usd: 1800000,
    asp_range: { low: 1400000, high: 2200000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2021,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Patient Monitoring ---
  {
    device_name: 'IntelliVue MX800 Patient Monitor',
    company: 'Philips',
    product_category: 'device_monitoring',
    device_category: 'cardiovascular',
    hospital_asp_usd: 18000,
    asp_range: { low: 14000, high: 24000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'Root Patient Monitoring Platform',
    company: 'Masimo',
    product_category: 'device_monitoring',
    device_category: 'cardiovascular',
    hospital_asp_usd: 6500,
    asp_range: { low: 5000, high: 9000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2019,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; SEC filings',
  },

  // --- Additional Misc ---
  {
    device_name: 'Arctic Sun 5000 Temperature Management',
    company: 'BD',
    product_category: 'device_surgical',
    device_category: 'neurology',
    hospital_asp_usd: 30000,
    asp_range: { low: 25000, high: 38000 },
    pricing_model: 'per_unit_capital',
    year_launched: 2018,
    gpo_contracted: true,
    source: 'Hospital procurement surveys; GPO contract data',
  },
  {
    device_name: 'Guardian 4 CGM Sensor',
    company: 'Medtronic',
    product_category: 'device_monitoring',
    device_category: 'diabetes_metabolic',
    hospital_asp_usd: 70,
    asp_range: { low: 55, high: 85 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2023,
    gpo_contracted: false,
    reimbursement_code: 'HCPCS K0553/K0554',
    source: 'CMS DMEPOS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'LINQ II Insertable Cardiac Monitor',
    company: 'Medtronic',
    product_category: 'device_implantable',
    device_category: 'cardiovascular',
    hospital_asp_usd: 8500,
    asp_range: { low: 7000, high: 10000 },
    pricing_model: 'per_procedure',
    year_launched: 2022,
    gpo_contracted: true,
    reimbursement_code: 'CPT 33285',
    source: 'CMS Fee Schedule 2024; GPO contract data',
  },
  {
    device_name: 'TREVO NXT Stentriever',
    company: 'Stryker',
    product_category: 'device_surgical',
    device_category: 'neurology',
    hospital_asp_usd: 5500,
    asp_range: { low: 4500, high: 7000 },
    pricing_model: 'per_unit_disposable',
    year_launched: 2021,
    gpo_contracted: true,
    reimbursement_code: 'CPT 37184',
    source: 'GPO contract data; hospital procurement surveys',
  },
  {
    device_name: 'Shield Colorectal Cancer Blood Test',
    company: 'Guardant Health',
    product_category: 'diagnostics_ivd',
    device_category: 'ivd_oncology',
    hospital_asp_usd: 895,
    asp_range: { low: 600, high: 1000 },
    pricing_model: 'per_test',
    year_launched: 2024,
    gpo_contracted: false,
    reimbursement_code: 'CPT 0464U',
    source: 'CMS Fee Schedule 2024; manufacturer pricing',
  },
  {
    device_name: 'Xpert Xpress SARS-CoV-2/Flu/RSV Plus',
    company: 'Cepheid (Danaher)',
    product_category: 'device_point_of_care',
    device_category: 'ivd_infectious',
    hospital_asp_usd: 22,
    asp_range: { low: 15, high: 30 },
    pricing_model: 'per_test',
    year_launched: 2021,
    gpo_contracted: true,
    reimbursement_code: 'CPT 87636',
    source: 'GPO contract data; CMS Fee Schedule 2024',
  },
];

// ────────────────────────────────────────────────────────────
// HELPER FUNCTIONS
// ────────────────────────────────────────────────────────────

/**
 * Filter benchmarks by DeviceCategory (e.g., 'cardiovascular', 'orthopedic').
 */
export function getBenchmarksByCategory(category: DeviceCategory): DevicePricingBenchmark[] {
  return DEVICE_PRICING_BENCHMARKS.filter((b) => b.device_category === category);
}

/**
 * Filter benchmarks by ProductCategory (e.g., 'device_implantable', 'diagnostics_ivd').
 */
export function getBenchmarksByProductType(type: ProductCategory): DevicePricingBenchmark[] {
  return DEVICE_PRICING_BENCHMARKS.filter((b) => b.product_category === type);
}

/**
 * Calculate a given percentile of hospital ASP within a DeviceCategory.
 * Uses linear interpolation between sorted ASP values.
 *
 * @param category - The device category to analyze
 * @param percentile - A number between 0 and 100
 * @returns The ASP value at the given percentile, or 0 if no data
 */
export function getASPPercentile(category: DeviceCategory, percentile: number): number {
  const benchmarks = getBenchmarksByCategory(category);
  if (benchmarks.length === 0) return 0;

  const sorted = benchmarks.map((b) => b.hospital_asp_usd).sort((a, b) => a - b);
  const clampedPercentile = Math.max(0, Math.min(100, percentile));

  if (sorted.length === 1) return sorted[0];

  const rank = (clampedPercentile / 100) * (sorted.length - 1);
  const lowerIndex = Math.floor(rank);
  const upperIndex = Math.ceil(rank);
  const fraction = rank - lowerIndex;

  if (lowerIndex === upperIndex) return sorted[lowerIndex];

  return sorted[lowerIndex] + fraction * (sorted[upperIndex] - sorted[lowerIndex]);
}

/**
 * Get competitive pricing range (low, median, high) for a DeviceCategory.
 *
 * @param category - The device category to analyze
 * @returns An object with low (25th percentile), median (50th), and high (75th) ASP values
 */
export function getCompetitivePricingRange(
  category: DeviceCategory,
): { low: number; median: number; high: number } {
  return {
    low: getASPPercentile(category, 25),
    median: getASPPercentile(category, 50),
    high: getASPPercentile(category, 75),
  };
}
