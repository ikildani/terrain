// ============================================================
// TERRAIN — CPT Code Database for IVD Diagnostics
// src/lib/data/cpt-codes.ts
//
// CMS Clinical Lab Fee Schedule (CLFS) 2025 national rates,
// MolDx coverage status, and helper functions for IVD market
// sizing.
// ============================================================

// ────────────────────────────────────────────────────────────
// TYPES
// ────────────────────────────────────────────────────────────

export type CPTCategory =
  | 'molecular_genomic'
  | 'immunoassay'
  | 'chemistry'
  | 'hematology'
  | 'microbiology'
  | 'flow_cytometry'
  | 'cytogenetics'
  | 'surgical_pathology'
  | 'urinalysis'
  | 'coagulation';

export type MolDxStatus =
  | 'covered_national'    // NCD 90.2 or other national coverage
  | 'covered_moldx'       // MolDx-covered via Palmetto/Noridian/CGS LCD
  | 'covered_mac_lcd'     // MAC-specific LCD (non-MolDx)
  | 'gap_fill'            // Gap-fill pricing — contractor-set local rates
  | 'not_covered'         // No CMS coverage
  | 'coverage_pending'    // Coverage application in progress
  | 'not_applicable';     // Not a molecular test (standard chemistry/hematology)

export interface CPTCodeEntry {
  cpt_code: string;
  short_description: string;
  long_description: string;
  category: CPTCategory;
  subcategory: string;
  cms_national_rate_2025: number;
  cms_hospital_outpatient?: number;
  private_payer_avg_rate?: number;
  specimen_type: string[];
  methodology: string;
  clinical_use: string;
  test_complexity: 'waived' | 'moderate' | 'high';
  clia_requirement: string;
  common_panels: string[];
  moldx_coverage: MolDxStatus;
  ncd_lcd_reference?: string;
  effective_date: string;
  source: string;
}

// ────────────────────────────────────────────────────────────
// CPT CODE DATABASE
// ────────────────────────────────────────────────────────────

export const CPT_CODE_DATABASE: CPTCodeEntry[] = [
  // ═══════════════════════════════════════════════════════════
  // MOLECULAR / GENOMIC — NGS Panels
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '81455',
    short_description: 'NGS, solid tumor, 51+ genes',
    long_description: 'Targeted genomic sequence analysis panel, solid organ neoplasm, DNA analysis, interrogation for sequence variants in 51 or more genes',
    category: 'molecular_genomic',
    subcategory: 'NGS Panel — Solid Tumor',
    cms_national_rate_2025: 2919.0,
    cms_hospital_outpatient: 2919.0,
    private_payer_avg_rate: 3800.0,
    specimen_type: ['FFPE tissue', 'Fresh tissue', 'Bone marrow'],
    methodology: 'Next-generation sequencing (NGS)',
    clinical_use: 'Comprehensive genomic profiling for solid tumors — identifies actionable mutations (EGFR, KRAS, BRAF, ALK, ROS1, etc.) to guide targeted therapy selection',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory with appropriate NGS validation',
    common_panels: ['FoundationOne CDx', 'Tempus xT', 'MSK-IMPACT', 'Oncomine Dx Target Test'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2 — NGS for advanced cancer patients',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81456',
    short_description: 'NGS, hematologic neoplasm, 51+ genes',
    long_description: 'Targeted genomic sequence analysis panel, hematologic neoplasm or disorder, DNA and RNA analysis, interrogation for sequence variants in 51 or more genes',
    category: 'molecular_genomic',
    subcategory: 'NGS Panel — Hematologic',
    cms_national_rate_2025: 2919.0,
    cms_hospital_outpatient: 2919.0,
    private_payer_avg_rate: 3800.0,
    specimen_type: ['Bone marrow aspirate', 'Peripheral blood', 'FFPE tissue'],
    methodology: 'Next-generation sequencing (NGS) — DNA and RNA',
    clinical_use: 'Comprehensive genomic profiling for hematologic malignancies — AML, MDS, lymphoma, myeloma',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['FoundationOne Heme', 'Tempus xH'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81449',
    short_description: 'NGS, solid tumor, 5-50 genes',
    long_description: 'Targeted genomic sequence analysis panel, solid organ neoplasm, DNA analysis, 5-50 genes',
    category: 'molecular_genomic',
    subcategory: 'NGS Panel — Solid Tumor (Focused)',
    cms_national_rate_2025: 1624.0,
    private_payer_avg_rate: 2200.0,
    specimen_type: ['FFPE tissue', 'Fresh tissue'],
    methodology: 'Next-generation sequencing (NGS)',
    clinical_use: 'Focused NGS panel for solid tumors — commonly used when specific gene targets are sought',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Oncomine Focus Assay', 'Archer FusionPlex'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81450',
    short_description: 'NGS, hematologic, 5-50 genes',
    long_description: 'Targeted genomic sequence analysis panel, hematologic neoplasm or disorder, DNA and RNA analysis, 5-50 genes',
    category: 'molecular_genomic',
    subcategory: 'NGS Panel — Hematologic (Focused)',
    cms_national_rate_2025: 1624.0,
    private_payer_avg_rate: 2200.0,
    specimen_type: ['Bone marrow aspirate', 'Peripheral blood'],
    methodology: 'Next-generation sequencing (NGS)',
    clinical_use: 'Focused hematologic NGS panel for targeted gene analysis',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: [],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81479',
    short_description: 'Unlisted molecular pathology',
    long_description: 'Unlisted molecular pathology procedure — used for novel tests without assigned CPT codes',
    category: 'molecular_genomic',
    subcategory: 'Unlisted / Miscellaneous',
    cms_national_rate_2025: 0,
    private_payer_avg_rate: 0,
    specimen_type: ['Various'],
    methodology: 'Various',
    clinical_use: 'Placeholder code for novel molecular tests pending permanent CPT assignment. Requires individual prior authorization and manual review.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: [],
    moldx_coverage: 'gap_fill',
    ncd_lcd_reference: 'Individual contractor determination',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Proprietary Lab Analyses (PLA codes) ═══
  {
    cpt_code: '0239U',
    short_description: 'Guardant360 CDx (liquid biopsy)',
    long_description: 'Targeted genomic sequence analysis, cell-free DNA, 74 genes, solid organ neoplasm — Guardant360 CDx',
    category: 'molecular_genomic',
    subcategory: 'Liquid Biopsy',
    cms_national_rate_2025: 3500.0,
    private_payer_avg_rate: 5800.0,
    specimen_type: ['Peripheral blood (plasma)'],
    methodology: 'Cell-free DNA NGS (liquid biopsy)',
    clinical_use: 'Non-invasive comprehensive genomic profiling via blood draw. FDA-approved CDx for osimertinib (EGFR), amivantamab (EGFR exon 20 ins). Used when tissue unavailable.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory (Guardant CLIA lab)',
    common_panels: ['Guardant360 CDx'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L38779',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '0037U',
    short_description: 'F1 Liquid CDx (liquid biopsy)',
    long_description: 'Targeted genomic sequence analysis, cell-free DNA, 324 genes — FoundationOne Liquid CDx',
    category: 'molecular_genomic',
    subcategory: 'Liquid Biopsy',
    cms_national_rate_2025: 3500.0,
    private_payer_avg_rate: 5800.0,
    specimen_type: ['Peripheral blood (plasma)'],
    methodology: 'Cell-free DNA NGS (liquid biopsy)',
    clinical_use: 'Comprehensive liquid biopsy. FDA-approved CDx for multiple therapies (alpelisib, rucaparib, entrectinib, etc.).',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory (Foundation Medicine CLIA lab)',
    common_panels: ['FoundationOne Liquid CDx'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L38779',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Single-Gene Molecular Tests ═══
  {
    cpt_code: '81235',
    short_description: 'EGFR gene analysis',
    long_description: 'EGFR (epidermal growth factor receptor) gene analysis, common variants (e.g., exon 19 deletion, L858R, T790M)',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 406.0,
    private_payer_avg_rate: 580.0,
    specimen_type: ['FFPE tissue', 'Cytology specimen', 'Plasma (cfDNA)'],
    methodology: 'PCR / Sanger sequencing / real-time PCR',
    clinical_use: 'NSCLC — identifies EGFR mutations for TKI therapy selection (osimertinib, erlotinib, afatinib)',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['cobas EGFR Mutation Test v2'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81210',
    short_description: 'BRAF gene analysis (V600)',
    long_description: 'BRAF (B-Raf proto-oncogene) gene analysis, V600 variant(s)',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 194.0,
    private_payer_avg_rate: 300.0,
    specimen_type: ['FFPE tissue', 'Fresh tissue'],
    methodology: 'PCR / real-time PCR',
    clinical_use: 'Melanoma, CRC, NSCLC, thyroid — identifies BRAF V600E/K mutations for targeted therapy (vemurafenib, dabrafenib + trametinib)',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['THxID BRAF Kit'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81275',
    short_description: 'KRAS gene analysis (codons 12/13)',
    long_description: 'KRAS (Kirsten rat sarcoma viral oncogene homolog) gene analysis, variants in codons 12 and 13',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 194.0,
    private_payer_avg_rate: 300.0,
    specimen_type: ['FFPE tissue'],
    methodology: 'PCR / Sanger sequencing',
    clinical_use: 'CRC, NSCLC, pancreatic — KRAS wild-type status required for anti-EGFR therapy (cetuximab, panitumumab). G12C mutation targetable by sotorasib/adagrasib.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Lumakras CDx (QIAGEN therascreen KRAS RGQ PCR Kit)'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81276',
    short_description: 'KRAS gene analysis (additional variants)',
    long_description: 'KRAS gene analysis, additional variant(s) (e.g., codons 61, 117, 146)',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 194.0,
    private_payer_avg_rate: 280.0,
    specimen_type: ['FFPE tissue'],
    methodology: 'PCR / Sanger sequencing',
    clinical_use: 'Extended KRAS testing beyond codons 12/13 for expanded RAS wild-type assessment',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: [],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81162',
    short_description: 'BRCA1/2 full sequence + del/dup',
    long_description: 'BRCA1, BRCA2 gene analysis; full sequence analysis and full duplication/deletion analysis',
    category: 'molecular_genomic',
    subcategory: 'Hereditary Cancer',
    cms_national_rate_2025: 2188.0,
    private_payer_avg_rate: 3500.0,
    specimen_type: ['Peripheral blood', 'Saliva'],
    methodology: 'NGS + MLPA (multiplex ligation-dependent probe amplification)',
    clinical_use: 'Hereditary breast/ovarian cancer risk assessment. CDx for PARP inhibitors (olaparib, rucaparib, niraparib, talazoparib).',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['BRACAnalysis CDx (Myriad)', 'FoundationOne CDx'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L36194',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81301',
    short_description: 'MSI analysis',
    long_description: 'Microsatellite instability analysis (e.g., BAT25, BAT26) of tumor, direct method',
    category: 'molecular_genomic',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 294.0,
    private_payer_avg_rate: 420.0,
    specimen_type: ['FFPE tissue'],
    methodology: 'PCR-based fragment analysis',
    clinical_use: 'Colorectal and other solid tumors — MSI-H/dMMR status for immunotherapy eligibility (pembrolizumab, nivolumab). Also Lynch syndrome screening.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Promega MSI Analysis System'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81401',
    short_description: 'Molecular pathology Level 2',
    long_description: 'Molecular pathology procedure, Level 2 (e.g., 2-5 exons)',
    category: 'molecular_genomic',
    subcategory: 'General Molecular',
    cms_national_rate_2025: 174.0,
    private_payer_avg_rate: 250.0,
    specimen_type: ['Various'],
    methodology: 'PCR / Sanger sequencing',
    clinical_use: 'General molecular pathology — small gene analysis',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: [],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Pharmacogenomics ═══
  {
    cpt_code: '81225',
    short_description: 'CYP2C19 gene analysis',
    long_description: 'CYP2C19 (cytochrome P450, family 2, subfamily C, polypeptide 19) gene analysis, common variants',
    category: 'molecular_genomic',
    subcategory: 'Pharmacogenomics',
    cms_national_rate_2025: 194.0,
    private_payer_avg_rate: 300.0,
    specimen_type: ['Peripheral blood', 'Buccal swab'],
    methodology: 'PCR / microarray',
    clinical_use: 'Clopidogrel metabolism — poor metabolizers at increased risk of CV events. Also voriconazole, PPIs, SSRIs dosing.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['GeneSight', 'OneOme RightMed'],
    moldx_coverage: 'covered_moldx',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81227',
    short_description: 'CYP2D6 gene analysis',
    long_description: 'CYP2D6 (cytochrome P450, family 2, subfamily D, polypeptide 6) gene analysis, common variants',
    category: 'molecular_genomic',
    subcategory: 'Pharmacogenomics',
    cms_national_rate_2025: 257.0,
    private_payer_avg_rate: 380.0,
    specimen_type: ['Peripheral blood', 'Buccal swab'],
    methodology: 'PCR / microarray',
    clinical_use: 'Tamoxifen metabolism (breast cancer), codeine/tramadol metabolism, psychiatric medication dosing',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['GeneSight', 'OneOme RightMed'],
    moldx_coverage: 'covered_moldx',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Prenatal / Reproductive ═══
  {
    cpt_code: '81420',
    short_description: 'NIPT (cell-free fetal DNA)',
    long_description: 'Fetal chromosomal aneuploidy genomic sequence analysis panel, circulating cell-free fetal DNA in maternal blood',
    category: 'molecular_genomic',
    subcategory: 'Prenatal Screening',
    cms_national_rate_2025: 799.0,
    private_payer_avg_rate: 1200.0,
    specimen_type: ['Maternal peripheral blood'],
    methodology: 'Cell-free DNA NGS',
    clinical_use: 'Non-invasive prenatal testing for trisomy 21, 18, 13 and sex chromosome aneuploidies. Recommended for all pregnancies (ACOG 2023).',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Harmony (Roche/Ariosa)', 'MaterniT21 PLUS (Sequenom)', 'Panorama (Natera)', 'NIFTY (BGI)'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L36256',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // IMMUNOASSAY
  // ═══════════════════════════════════════════════════════════

  // ═══ Cardiac Markers ═══
  {
    cpt_code: '84484',
    short_description: 'Troponin, quantitative',
    long_description: 'Troponin, quantitative (e.g., troponin I, troponin T)',
    category: 'immunoassay',
    subcategory: 'Cardiac Markers',
    cms_national_rate_2025: 12.49,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Serum', 'Plasma (heparin)'],
    methodology: 'Chemiluminescent immunoassay (CLIA) / ELISA',
    clinical_use: 'Acute coronary syndrome (ACS) diagnosis. High-sensitivity troponin (hs-cTn) is standard of care for chest pain evaluation.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity (some POC waived)',
    common_panels: ['Cardiac panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83880',
    short_description: 'BNP / NT-proBNP',
    long_description: 'Natriuretic peptide (e.g., BNP, NT-proBNP)',
    category: 'immunoassay',
    subcategory: 'Cardiac Markers',
    cms_national_rate_2025: 39.76,
    private_payer_avg_rate: 58.0,
    specimen_type: ['Serum', 'Plasma (EDTA)'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Heart failure diagnosis and monitoring. NT-proBNP >300 pg/mL suggests acute HF. Used for prognosis and treatment monitoring.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity (some POC waived)',
    common_panels: ['Heart failure panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82553',
    short_description: 'CK-MB (creatine kinase-MB)',
    long_description: 'Creatine kinase (CK), MB fraction',
    category: 'immunoassay',
    subcategory: 'Cardiac Markers',
    cms_national_rate_2025: 13.78,
    private_payer_avg_rate: 20.0,
    specimen_type: ['Serum'],
    methodology: 'Immunoassay',
    clinical_use: 'Myocardial infarction marker (largely replaced by high-sensitivity troponin but still ordered)',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Cardiac panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Renal / Kidney ═══
  {
    cpt_code: '82610',
    short_description: 'Cystatin C',
    long_description: 'Cystatin C',
    category: 'immunoassay',
    subcategory: 'Renal Markers',
    cms_national_rate_2025: 18.43,
    private_payer_avg_rate: 30.0,
    specimen_type: ['Serum'],
    methodology: 'Particle-enhanced immunonephelometry / immunoturbidimetry',
    clinical_use: 'GFR estimation — more accurate than creatinine alone, especially in elderly. KDIGO recommends combined eGFR (creatinine + cystatin C).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Renal panel (advanced)'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Autoimmune ═══
  {
    cpt_code: '86235',
    short_description: 'ANA (antinuclear antibody)',
    long_description: 'Nuclear antigen antibody (ANA); extractable nuclear antigen (ENA) antibody, each antibody',
    category: 'immunoassay',
    subcategory: 'Autoimmune Markers',
    cms_national_rate_2025: 18.34,
    private_payer_avg_rate: 28.0,
    specimen_type: ['Serum'],
    methodology: 'Immunofluorescence (IFA) / ELISA / multiplex',
    clinical_use: 'Lupus (SLE), Sjogren, scleroderma, mixed connective tissue disease screening',
    test_complexity: 'high',
    clia_requirement: 'High complexity (IFA interpretation)',
    common_panels: ['ANA panel', 'Autoimmune panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86200',
    short_description: 'Anti-CCP antibody',
    long_description: 'Cyclic citrullinated peptide (CCP), antibody (anti-CCP)',
    category: 'immunoassay',
    subcategory: 'Autoimmune Markers',
    cms_national_rate_2025: 18.43,
    private_payer_avg_rate: 30.0,
    specimen_type: ['Serum'],
    methodology: 'ELISA / chemiluminescent immunoassay',
    clinical_use: 'Rheumatoid arthritis — more specific than RF. High anti-CCP + RF = 95%+ specificity for RA.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Rheumatoid arthritis panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Inflammatory ═══
  {
    cpt_code: '86141',
    short_description: 'hs-CRP (C-reactive protein)',
    long_description: 'C-reactive protein (CRP), high sensitivity (hsCRP)',
    category: 'immunoassay',
    subcategory: 'Inflammatory Markers',
    cms_national_rate_2025: 15.61,
    private_payer_avg_rate: 24.0,
    specimen_type: ['Serum'],
    methodology: 'Particle-enhanced immunonephelometry / immunoturbidimetry',
    clinical_use: 'Cardiovascular risk stratification. Also inflammatory disease activity monitoring. AHA/ACC recommend for intermediate CV risk assessment.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Cardiovascular risk panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83993',
    short_description: 'Calprotectin, fecal',
    long_description: 'Calprotectin, fecal',
    category: 'immunoassay',
    subcategory: 'GI / Inflammatory',
    cms_national_rate_2025: 24.50,
    private_payer_avg_rate: 38.0,
    specimen_type: ['Stool'],
    methodology: 'ELISA / fluorescent immunoassay',
    clinical_use: 'IBD (Crohn, UC) activity monitoring. Differentiates IBD from IBS. >250 ug/g suggests active inflammation.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['IBD panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Tumor Markers (Serology) ═══
  {
    cpt_code: '84153',
    short_description: 'PSA (prostate specific antigen)',
    long_description: 'Prostate specific antigen (PSA); total',
    category: 'immunoassay',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 25.22,
    private_payer_avg_rate: 38.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Prostate cancer screening and monitoring. PSA >4.0 ng/mL = biopsy threshold (age-adjusted cutoffs used clinically).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Prostate health panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86300',
    short_description: 'CA-125 (ovarian tumor marker)',
    long_description: 'Immunoassay for tumor antigen, quantitative; CA 125',
    category: 'immunoassay',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 25.22,
    private_payer_avg_rate: 36.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Ovarian cancer monitoring. Not recommended for screening. Used for treatment response and recurrence monitoring.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Ovarian cancer panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86301',
    short_description: 'CA 19-9 (GI tumor marker)',
    long_description: 'Immunoassay for tumor antigen, quantitative; CA 19-9',
    category: 'immunoassay',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 25.22,
    private_payer_avg_rate: 36.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Pancreatic cancer monitoring. Also cholangiocarcinoma. Not screening — used for treatment response.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: [],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82378',
    short_description: 'CEA (carcinoembryonic antigen)',
    long_description: 'Carcinoembryonic antigen (CEA)',
    category: 'immunoassay',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 22.07,
    private_payer_avg_rate: 34.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Colorectal cancer monitoring, post-surgical surveillance. Rising CEA suggests recurrence.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CRC surveillance panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Reproductive / Endocrine ═══
  {
    cpt_code: '86336',
    short_description: 'AMH (anti-Mullerian hormone)',
    long_description: 'Inhibin A; anti-Mullerian hormone (AMH)',
    category: 'immunoassay',
    subcategory: 'Reproductive',
    cms_national_rate_2025: 31.85,
    private_payer_avg_rate: 65.0,
    specimen_type: ['Serum'],
    methodology: 'ELISA / chemiluminescent immunoassay',
    clinical_use: 'Ovarian reserve assessment (fertility). Low AMH = diminished ovarian reserve. Used for IVF planning.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Fertility panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Sepsis / Critical Care ═══
  {
    cpt_code: '84436',
    short_description: 'Procalcitonin (PCT)',
    long_description: 'Procalcitonin (PCT)',
    category: 'immunoassay',
    subcategory: 'Sepsis / Critical Care',
    cms_national_rate_2025: 30.54,
    private_payer_avg_rate: 48.0,
    specimen_type: ['Serum', 'Plasma'],
    methodology: 'Chemiluminescent immunoassay / BRAHMS technology',
    clinical_use: 'Sepsis diagnosis and antibiotic stewardship. PCT >0.5 ng/mL suggests bacterial infection. FDA cleared for antibiotic de-escalation guidance.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Sepsis workup'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══ Liver Fibrosis ═══
  {
    cpt_code: '81596',
    short_description: 'ELF Score (Enhanced Liver Fibrosis)',
    long_description: 'Infectious disease, chronic hepatitis C virus (HCV) infection, six biochemical assays and target-specific algorithm',
    category: 'immunoassay',
    subcategory: 'Liver',
    cms_national_rate_2025: 63.45,
    private_payer_avg_rate: 95.0,
    specimen_type: ['Serum'],
    methodology: 'Immunoassay panel (HA, PIIINP, TIMP-1) + algorithm',
    clinical_use: 'Liver fibrosis staging without biopsy. Non-invasive alternative to FibroScan. ELF >9.8 = advanced fibrosis.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Liver fibrosis panel'],
    moldx_coverage: 'covered_mac_lcd',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // CHEMISTRY
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '83036',
    short_description: 'HbA1c (glycated hemoglobin)',
    long_description: 'Hemoglobin; glycosylated (A1c)',
    category: 'chemistry',
    subcategory: 'Diabetes',
    cms_national_rate_2025: 11.91,
    private_payer_avg_rate: 20.0,
    specimen_type: ['Whole blood (EDTA)'],
    methodology: 'HPLC / immunoassay / boronate affinity',
    clinical_use: 'Diabetes diagnosis (HbA1c >= 6.5%) and monitoring. Reflects average glucose over 2-3 months.',
    test_complexity: 'waived',
    clia_requirement: 'Waived (some POC methods) / Moderate complexity',
    common_panels: ['Diabetes panel', 'Metabolic panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '80048',
    short_description: 'BMP (basic metabolic panel)',
    long_description: 'Basic metabolic panel (calcium, CO2, chloride, creatinine, glucose, potassium, sodium, BUN)',
    category: 'chemistry',
    subcategory: 'General Chemistry Panel',
    cms_national_rate_2025: 10.51,
    private_payer_avg_rate: 18.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry / ISE',
    clinical_use: 'Comprehensive metabolic screening — electrolytes, kidney function, glucose. Standard admission and preoperative panel.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['BMP'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '80053',
    short_description: 'CMP (comprehensive metabolic panel)',
    long_description: 'Comprehensive metabolic panel (albumin, alk phos, ALT, AST, bilirubin, BUN, calcium, CO2, chloride, creatinine, glucose, potassium, sodium, total protein)',
    category: 'chemistry',
    subcategory: 'General Chemistry Panel',
    cms_national_rate_2025: 12.14,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry / ISE',
    clinical_use: 'Comprehensive organ function — liver, kidney, electrolytes, glucose, protein. Most commonly ordered chemistry panel.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CMP'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '80061',
    short_description: 'Lipid panel',
    long_description: 'Lipid panel (total cholesterol, HDL, direct LDL, triglycerides)',
    category: 'chemistry',
    subcategory: 'Cardiovascular Risk',
    cms_national_rate_2025: 15.65,
    private_payer_avg_rate: 24.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry / enzymatic assay',
    clinical_use: 'Cardiovascular risk assessment. ASCVD risk calculation. Statin therapy decision-making.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Lipid panel', 'CV risk panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83695',
    short_description: 'Lipoprotein(a) [Lp(a)]',
    long_description: 'Lipoprotein (a)',
    category: 'chemistry',
    subcategory: 'Cardiovascular Risk',
    cms_national_rate_2025: 19.78,
    private_payer_avg_rate: 35.0,
    specimen_type: ['Serum'],
    methodology: 'Immunoturbidimetry / ELISA',
    clinical_use: 'Independent cardiovascular risk factor. Lp(a) >50 mg/dL = elevated risk. Genetically determined — emerging target (pelacarsen, olpasiran trials).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Advanced lipid panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82607',
    short_description: 'Vitamin B12 (cyanocobalamin)',
    long_description: 'Cyanocobalamin (Vitamin B12)',
    category: 'chemistry',
    subcategory: 'Nutritional',
    cms_national_rate_2025: 18.26,
    private_payer_avg_rate: 28.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'B12 deficiency diagnosis — anemia, neuropathy. Common in elderly, vegetarians, post-bariatric surgery.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Anemia panel', 'Nutritional panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82306',
    short_description: '25-OH Vitamin D',
    long_description: 'Vitamin D; 25 hydroxy, includes fraction(s), if performed',
    category: 'chemistry',
    subcategory: 'Nutritional',
    cms_national_rate_2025: 33.46,
    private_payer_avg_rate: 50.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / LC-MS/MS',
    clinical_use: 'Vitamin D status — <20 ng/mL deficient, 20-30 insufficient. Bone health, immune function.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Nutritional panel', 'Bone health panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // COAGULATION
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '85379',
    short_description: 'D-Dimer, quantitative',
    long_description: 'D-dimer; quantitative',
    category: 'coagulation',
    subcategory: 'Thrombosis',
    cms_national_rate_2025: 11.79,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Plasma (citrate)'],
    methodology: 'Immunoturbidimetric / ELISA / latex agglutination',
    clinical_use: 'VTE exclusion (PE/DVT). High negative predictive value. D-dimer <500 ng/mL with low clinical probability effectively rules out PE.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Coagulation panel', 'DVT/PE workup'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // HEMATOLOGY
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '85025',
    short_description: 'CBC with automated differential',
    long_description: 'Blood count; complete (CBC), automated, and automated differential WBC count',
    category: 'hematology',
    subcategory: 'Complete Blood Count',
    cms_national_rate_2025: 8.23,
    private_payer_avg_rate: 14.0,
    specimen_type: ['Whole blood (EDTA)'],
    methodology: 'Automated hematology analyzer (impedance / flow cytometry)',
    clinical_use: 'Most commonly ordered lab test. Anemia, infection, leukemia screening. Pre-operative assessment.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CBC'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // MICROBIOLOGY
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '87491',
    short_description: 'Chlamydia NAAT',
    long_description: 'Infectious agent detection by nucleic acid; Chlamydia trachomatis, amplified probe technique',
    category: 'microbiology',
    subcategory: 'STI Testing',
    cms_national_rate_2025: 35.09,
    private_payer_avg_rate: 50.0,
    specimen_type: ['Urine', 'Cervical swab', 'Urethral swab', 'Rectal swab', 'Pharyngeal swab'],
    methodology: 'NAAT (PCR / TMA / SDA)',
    clinical_use: 'Chlamydia screening and diagnosis. CDC recommends annual screening for sexually active women <25.',
    test_complexity: 'high',
    clia_requirement: 'High complexity (waived for some platforms)',
    common_panels: ['CT/GC panel', 'STI panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87591',
    short_description: 'Gonorrhea NAAT',
    long_description: 'Infectious agent detection by nucleic acid; Neisseria gonorrhoeae, amplified probe technique',
    category: 'microbiology',
    subcategory: 'STI Testing',
    cms_national_rate_2025: 35.09,
    private_payer_avg_rate: 50.0,
    specimen_type: ['Urine', 'Cervical swab', 'Urethral swab', 'Rectal swab', 'Pharyngeal swab'],
    methodology: 'NAAT (PCR / TMA / SDA)',
    clinical_use: 'Gonorrhea screening and diagnosis. Typically ordered with chlamydia NAAT.',
    test_complexity: 'high',
    clia_requirement: 'High complexity (waived for some platforms)',
    common_panels: ['CT/GC panel', 'STI panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87389',
    short_description: 'HIV-1/2 Ag/Ab combo',
    long_description: 'Infectious agent antigen detection by immunoassay; HIV-1 antigen/antibody, combined',
    category: 'microbiology',
    subcategory: 'HIV',
    cms_national_rate_2025: 26.42,
    private_payer_avg_rate: 40.0,
    specimen_type: ['Serum', 'Plasma'],
    methodology: '4th generation ELISA / CMIA (chemiluminescent microparticle immunoassay)',
    clinical_use: 'HIV screening — detects both p24 antigen and HIV-1/2 antibodies. Reduces window period to ~2 weeks. CDC recommended screening algorithm.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity (some rapid tests waived)',
    common_panels: ['HIV screening', 'STI panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87536',
    short_description: 'HIV-1 RNA viral load',
    long_description: 'Infectious agent detection by nucleic acid; HIV-1, quantification, includes reverse transcription',
    category: 'microbiology',
    subcategory: 'HIV',
    cms_national_rate_2025: 97.54,
    private_payer_avg_rate: 150.0,
    specimen_type: ['Plasma (EDTA)'],
    methodology: 'RT-PCR / NAAT',
    clinical_use: 'HIV viral load monitoring. Target: undetectable (<20-50 copies/mL). Monitoring ART efficacy every 3-6 months.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['HIV monitoring panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87522',
    short_description: 'HCV RNA viral load',
    long_description: 'Infectious agent detection by nucleic acid; hepatitis C virus, quantification',
    category: 'microbiology',
    subcategory: 'Hepatitis',
    cms_national_rate_2025: 97.54,
    private_payer_avg_rate: 150.0,
    specimen_type: ['Serum', 'Plasma'],
    methodology: 'RT-PCR / NAAT',
    clinical_use: 'HCV viral load quantification. Used to confirm active infection and monitor DAA treatment response. SVR12 = cure.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['HCV monitoring panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87635',
    short_description: 'SARS-CoV-2 (COVID-19) NAAT',
    long_description: 'Infectious agent detection by nucleic acid; SARS-CoV-2 (COVID-19), amplified probe technique',
    category: 'microbiology',
    subcategory: 'Respiratory',
    cms_national_rate_2025: 51.33,
    private_payer_avg_rate: 75.0,
    specimen_type: ['Nasopharyngeal swab', 'Anterior nares swab', 'Oropharyngeal swab'],
    methodology: 'RT-PCR',
    clinical_use: 'COVID-19 diagnosis. Gold standard for acute infection detection.',
    test_complexity: 'high',
    clia_requirement: 'High complexity (some rapid NAAT platforms waived)',
    common_panels: ['Respiratory panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87631',
    short_description: 'Respiratory pathogen panel (3-5 targets)',
    long_description: 'Infectious agent detection by nucleic acid; respiratory virus, multiplex reverse transcription and amplified probe technique, 3-5 targets',
    category: 'microbiology',
    subcategory: 'Respiratory',
    cms_national_rate_2025: 142.63,
    private_payer_avg_rate: 200.0,
    specimen_type: ['Nasopharyngeal swab'],
    methodology: 'Multiplex RT-PCR',
    clinical_use: 'Respiratory illness — simultaneous detection of influenza A/B, RSV, SARS-CoV-2, and other respiratory viruses.',
    test_complexity: 'high',
    clia_requirement: 'High complexity (some platforms moderate/waived)',
    common_panels: ['BioFire FilmArray RP', 'Cepheid Xpert Xpress'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87624',
    short_description: 'HPV high-risk NAAT',
    long_description: 'Infectious agent detection by nucleic acid; human papillomavirus (HPV), high-risk types (e.g., 16, 18, 31, 33, 35, 39, 45, 51, 52, 56, 58, 59, 68)',
    category: 'microbiology',
    subcategory: 'HPV / Cervical Screening',
    cms_national_rate_2025: 46.59,
    private_payer_avg_rate: 65.0,
    specimen_type: ['Cervical specimen (ThinPrep / SurePath)'],
    methodology: 'NAAT (PCR / TMA)',
    clinical_use: 'Cervical cancer screening — primary HPV testing or co-testing with Pap. USPSTF: every 5 years ages 30-65.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['Cervical screening', 'HPV panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '87625',
    short_description: 'HPV types 16 and 18 genotyping',
    long_description: 'Infectious agent detection by nucleic acid; human papillomavirus (HPV), types 16 and 18 only',
    category: 'microbiology',
    subcategory: 'HPV / Cervical Screening',
    cms_national_rate_2025: 46.59,
    private_payer_avg_rate: 65.0,
    specimen_type: ['Cervical specimen'],
    methodology: 'NAAT (PCR)',
    clinical_use: 'HPV 16/18 genotyping — highest risk types. Positive HPV 16/18 = direct referral to colposcopy.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['HPV genotyping reflex'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // FLOW CYTOMETRY
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '88184',
    short_description: 'Flow cytometry, first marker',
    long_description: 'Flow cytometry, cell surface, cytoplasmic, or nuclear marker, technical component only; first marker',
    category: 'flow_cytometry',
    subcategory: 'Immunophenotyping',
    cms_national_rate_2025: 28.26,
    private_payer_avg_rate: 42.0,
    specimen_type: ['Peripheral blood', 'Bone marrow aspirate', 'Body fluid', 'FFPE tissue'],
    methodology: 'Flow cytometry (fluorochrome-labeled antibodies)',
    clinical_use: 'Leukemia/lymphoma immunophenotyping. Identifies cell lineage (B-cell vs T-cell), maturity, and aberrant markers for diagnosis and MRD.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['Leukemia/lymphoma panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '88185',
    short_description: 'Flow cytometry, each additional marker',
    long_description: 'Flow cytometry, cell surface, cytoplasmic, or nuclear marker, technical component only; each additional marker',
    category: 'flow_cytometry',
    subcategory: 'Immunophenotyping',
    cms_national_rate_2025: 21.37,
    private_payer_avg_rate: 32.0,
    specimen_type: ['Peripheral blood', 'Bone marrow aspirate', 'Body fluid'],
    methodology: 'Flow cytometry',
    clinical_use: 'Additional markers for comprehensive immunophenotyping. Typical panels use 10-30+ markers.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['Leukemia/lymphoma panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // SURGICAL PATHOLOGY / IHC
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '88342',
    short_description: 'IHC, first antibody',
    long_description: 'Immunohistochemistry or immunocytochemistry, per specimen; initial single antibody stain procedure',
    category: 'surgical_pathology',
    subcategory: 'Immunohistochemistry',
    cms_national_rate_2025: 76.58,
    private_payer_avg_rate: 110.0,
    specimen_type: ['FFPE tissue'],
    methodology: 'Immunohistochemistry (IHC)',
    clinical_use: 'Protein expression in tissue. PD-L1 (TPS/CPS), HER2 (IHC 0-3+), ER/PR, Ki-67. Foundational for oncology treatment decisions.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['IHC panel', 'Breast panel (ER/PR/HER2/Ki-67)'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '88341',
    short_description: 'IHC, each additional antibody',
    long_description: 'Immunohistochemistry or immunocytochemistry, per specimen; each additional single antibody stain procedure',
    category: 'surgical_pathology',
    subcategory: 'Immunohistochemistry',
    cms_national_rate_2025: 66.22,
    private_payer_avg_rate: 95.0,
    specimen_type: ['FFPE tissue'],
    methodology: 'Immunohistochemistry (IHC)',
    clinical_use: 'Additional IHC stains for comprehensive tumor profiling.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['IHC panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // CYTOGENETICS (FISH)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '88365',
    short_description: 'FISH, each probe',
    long_description: 'In situ hybridization (e.g., FISH), per specimen; each additional single probe stain procedure',
    category: 'cytogenetics',
    subcategory: 'FISH',
    cms_national_rate_2025: 113.95,
    private_payer_avg_rate: 160.0,
    specimen_type: ['FFPE tissue', 'Bone marrow', 'Blood'],
    methodology: 'Fluorescence in situ hybridization (FISH)',
    clinical_use: 'Gene amplification/translocation detection — HER2 amplification (breast), ALK rearrangement (NSCLC), BCR-ABL (CML). Gold standard for HER2 equivocal (IHC 2+).',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['HER2 FISH', 'ALK break-apart FISH', 'BCR-ABL FISH'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // URINALYSIS
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '81001',
    short_description: 'Urinalysis with microscopy',
    long_description: 'Urinalysis, by dip stick or tablet reagent; with microscopy',
    category: 'urinalysis',
    subcategory: 'General Urinalysis',
    cms_national_rate_2025: 4.02,
    private_payer_avg_rate: 8.0,
    specimen_type: ['Urine (clean catch)', 'Urine (catheterized)'],
    methodology: 'Dipstick reagent + manual microscopy',
    clinical_use: 'UTI diagnosis, kidney disease screening, diabetes monitoring (glucosuria, proteinuria). Standard initial urinary evaluation with sediment analysis for casts, crystals, RBCs, WBCs.',
    test_complexity: 'waived',
    clia_requirement: 'Waived (dipstick) / Moderate (microscopy component at some sites)',
    common_panels: ['Urinalysis panel', 'Admission panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81003',
    short_description: 'Urinalysis automated',
    long_description: 'Urinalysis, by dip stick or tablet reagent; automated, without microscopy',
    category: 'urinalysis',
    subcategory: 'General Urinalysis',
    cms_national_rate_2025: 2.94,
    private_payer_avg_rate: 6.0,
    specimen_type: ['Urine (clean catch)', 'Urine (catheterized)'],
    methodology: 'Automated dipstick reader (reflectance photometry)',
    clinical_use: 'Rapid screening for UTI, proteinuria, hematuria, glucosuria. High-throughput automated analysis without manual microscopy. Used as initial screen with reflex to 81001 if abnormal.',
    test_complexity: 'waived',
    clia_requirement: 'Waived',
    common_panels: ['Urinalysis screen', 'POC panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // COAGULATION (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '85610',
    short_description: 'PT/INR (prothrombin time)',
    long_description: 'Prothrombin time (PT)',
    category: 'coagulation',
    subcategory: 'Coagulation Screening',
    cms_national_rate_2025: 5.13,
    private_payer_avg_rate: 10.0,
    specimen_type: ['Plasma (citrate)'],
    methodology: 'Optical / mechanical clot detection (coagulometer)',
    clinical_use: 'Warfarin monitoring (target INR 2.0-3.0 for most indications). Pre-surgical coagulation screening. Evaluates extrinsic and common pathways (factors VII, X, V, II, fibrinogen).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity (some POC INR devices waived)',
    common_panels: ['Coagulation panel', 'Pre-op panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '85730',
    short_description: 'PTT (partial thromboplastin time)',
    long_description: 'Thromboplastin time, partial (PTT); plasma or whole blood',
    category: 'coagulation',
    subcategory: 'Coagulation Screening',
    cms_national_rate_2025: 7.08,
    private_payer_avg_rate: 12.0,
    specimen_type: ['Plasma (citrate)'],
    methodology: 'Optical / mechanical clot detection (coagulometer)',
    clinical_use: 'Heparin therapy monitoring. Pre-surgical screening. Evaluates intrinsic and common pathways (factors XII, XI, IX, VIII, X, V, II, fibrinogen). Prolonged PTT workup includes mixing studies and lupus anticoagulant.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Coagulation panel', 'Pre-op panel', 'Heparin monitoring'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // CHEMISTRY (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '84443',
    short_description: 'TSH (thyroid stimulating hormone)',
    long_description: 'Thyroid stimulating hormone (TSH)',
    category: 'chemistry',
    subcategory: 'Thyroid / Endocrine',
    cms_national_rate_2025: 18.22,
    private_payer_avg_rate: 30.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / electrochemiluminescence',
    clinical_use: 'First-line thyroid function test. Hypothyroidism (TSH >4.5 mIU/L), hyperthyroidism (TSH <0.4 mIU/L). Monitoring levothyroxine and anti-thyroid therapy. USPSTF recommends screening in certain populations.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Thyroid panel', 'Metabolic panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '84439',
    short_description: 'Free T4 (thyroxine, free)',
    long_description: 'Thyroxine; free',
    category: 'chemistry',
    subcategory: 'Thyroid / Endocrine',
    cms_national_rate_2025: 12.04,
    private_payer_avg_rate: 20.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / equilibrium dialysis',
    clinical_use: 'Second-line thyroid test when TSH is abnormal. Free T4 confirms hypo- or hyperthyroidism. Unaffected by TBG variations (pregnancy, OCP use). Ordered reflexively with abnormal TSH.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Thyroid panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83540',
    short_description: 'Iron, serum',
    long_description: 'Iron',
    category: 'chemistry',
    subcategory: 'Iron Studies',
    cms_national_rate_2025: 7.67,
    private_payer_avg_rate: 14.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry (ferrozine method)',
    clinical_use: 'Iron deficiency and iron overload evaluation. Part of iron studies panel with TIBC, ferritin, and transferrin saturation. Low serum iron with low ferritin confirms iron deficiency anemia.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Iron studies panel', 'Anemia panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83550',
    short_description: 'Transferrin / TIBC',
    long_description: 'Iron binding capacity (TIBC)',
    category: 'chemistry',
    subcategory: 'Iron Studies',
    cms_national_rate_2025: 13.93,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry / immunoturbidimetry',
    clinical_use: 'Evaluates iron-binding capacity. Elevated TIBC in iron deficiency anemia, decreased in chronic disease and iron overload. Transferrin saturation = serum iron / TIBC is key diagnostic ratio.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Iron studies panel', 'Anemia panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82728',
    short_description: 'Ferritin',
    long_description: 'Ferritin',
    category: 'chemistry',
    subcategory: 'Iron Studies',
    cms_national_rate_2025: 13.93,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / immunoturbidimetry',
    clinical_use: 'Most sensitive single test for iron deficiency (ferritin <30 ng/mL). Also elevated as acute phase reactant in inflammation, liver disease, malignancy. Iron overload monitoring in hemochromatosis (target <200 ng/mL).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Iron studies panel', 'Anemia panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82247',
    short_description: 'Bilirubin, total',
    long_description: 'Bilirubin; total',
    category: 'chemistry',
    subcategory: 'Liver Function',
    cms_national_rate_2025: 5.50,
    private_payer_avg_rate: 10.0,
    specimen_type: ['Serum'],
    methodology: 'Spectrophotometry (diazo reaction / vanadate oxidation)',
    clinical_use: 'Liver function and hemolysis evaluation. Elevated in hepatitis, biliary obstruction, hemolytic anemia. Neonatal jaundice monitoring. Part of CMP and hepatic function panel.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CMP', 'Hepatic function panel', 'Neonatal bilirubin panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '82040',
    short_description: 'Albumin, serum',
    long_description: 'Albumin; serum, plasma or whole blood',
    category: 'chemistry',
    subcategory: 'Liver Function',
    cms_national_rate_2025: 5.60,
    private_payer_avg_rate: 10.0,
    specimen_type: ['Serum', 'Plasma'],
    methodology: 'Spectrophotometry (bromocresol green / bromocresol purple)',
    clinical_use: 'Liver synthetic function and nutritional status marker. Low albumin (<3.5 g/dL) in liver disease, nephrotic syndrome, malnutrition, critical illness. Prognostic indicator in hospitalized patients.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CMP', 'Hepatic function panel', 'Nutritional panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // IMMUNOASSAY (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '86316',
    short_description: 'AFP (alpha-fetoprotein, tumor marker)',
    long_description: 'Immunoassay for tumor antigen, quantitative; alpha-fetoprotein (AFP)',
    category: 'immunoassay',
    subcategory: 'Tumor Markers',
    cms_national_rate_2025: 18.34,
    private_payer_avg_rate: 28.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay',
    clinical_use: 'Hepatocellular carcinoma (HCC) surveillance — AFP >200 ng/mL highly suggestive of HCC. Also used for testicular germ cell tumor monitoring and prenatal neural tube defect screening (maternal serum AFP).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['HCC surveillance panel', 'Germ cell tumor panel', 'Prenatal screening'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86480',
    short_description: 'TB QuantiFERON / T-SPOT',
    long_description: 'Tuberculosis test, cell mediated immunity antigen response measurement; gamma interferon',
    category: 'immunoassay',
    subcategory: 'Infectious Disease',
    cms_national_rate_2025: 41.42,
    private_payer_avg_rate: 65.0,
    specimen_type: ['Whole blood (heparin or lithium heparin)'],
    methodology: 'Interferon-gamma release assay (IGRA) — ELISA (QuantiFERON) or ELISPOT (T-SPOT)',
    clinical_use: 'Latent tuberculosis infection (LTBI) detection. Preferred over TST in BCG-vaccinated populations. Single blood draw, no return visit. CDC recommends for healthcare workers, immigrants, and immunocompromised patients.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['TB screening panel', 'Pre-immunosuppression panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '83519',
    short_description: 'Insulin, immunoassay',
    long_description: 'Immunoassay for analyte other than infectious agent antibody or infectious agent antigen; insulin',
    category: 'immunoassay',
    subcategory: 'Endocrine / Metabolic',
    cms_national_rate_2025: 13.39,
    private_payer_avg_rate: 22.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / electrochemiluminescence',
    clinical_use: 'Insulin resistance evaluation (HOMA-IR calculation), insulinoma diagnosis, hypoglycemia workup. Fasting insulin >25 uIU/mL suggests significant insulin resistance. Used with glucose tolerance testing.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Insulin resistance panel', 'Metabolic syndrome panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86360',
    short_description: 'T-cell count (CD4/CD8)',
    long_description: 'T cells; absolute CD4 and CD8 count, including ratio',
    category: 'immunoassay',
    subcategory: 'Immune Function',
    cms_national_rate_2025: 19.21,
    private_payer_avg_rate: 32.0,
    specimen_type: ['Whole blood (EDTA)'],
    methodology: 'Flow cytometry (fluorochrome-labeled monoclonal antibodies)',
    clinical_use: 'HIV disease monitoring — CD4 count guides ART initiation and OI prophylaxis thresholds (<200 cells/uL = AIDS-defining). Also used in transplant immunosuppression monitoring and primary immunodeficiency evaluation.',
    test_complexity: 'high',
    clia_requirement: 'High complexity',
    common_panels: ['HIV monitoring panel', 'Immune function panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '86376',
    short_description: 'Microsomal antibody (thyroid TPO)',
    long_description: 'Microsomal antibodies (e.g., thyroid peroxidase [TPO])',
    category: 'immunoassay',
    subcategory: 'Autoimmune / Thyroid',
    cms_national_rate_2025: 16.40,
    private_payer_avg_rate: 26.0,
    specimen_type: ['Serum'],
    methodology: 'Chemiluminescent immunoassay / ELISA',
    clinical_use: 'Hashimoto thyroiditis and autoimmune thyroid disease diagnosis. TPO antibodies present in >90% of Hashimoto and >75% of Graves disease. Predicts progression from subclinical to overt hypothyroidism.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Thyroid panel (extended)', 'Autoimmune panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // MOLECULAR / GENOMIC (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '81272',
    short_description: 'ALK rearrangement analysis',
    long_description: 'KIT (v-Kit Hardy-Zuckerman 4 feline sarcoma viral oncogene homolog) gene analysis, ALK (anaplastic lymphoma kinase) gene rearrangement',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 406.0,
    private_payer_avg_rate: 580.0,
    specimen_type: ['FFPE tissue', 'Cytology specimen'],
    methodology: 'FISH / RT-PCR / NGS',
    clinical_use: 'NSCLC — ALK rearrangement present in ~5% of NSCLC. Guides ALK TKI therapy selection (crizotinib, alectinib, brigatinib, lorlatinib). NCCN guidelines mandate ALK testing for all advanced NSCLC.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['NSCLC biomarker panel', 'Lung cancer reflex panel'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2 — NGS for advanced cancer patients',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81306',
    short_description: 'NTRK gene fusion analysis',
    long_description: 'NUDT15 (nudix hydrolase 15) gene analysis; NTRK (neurotrophic tyrosine receptor kinase) gene fusion analysis',
    category: 'molecular_genomic',
    subcategory: 'Single Gene — Oncology',
    cms_national_rate_2025: 406.0,
    private_payer_avg_rate: 580.0,
    specimen_type: ['FFPE tissue', 'Peripheral blood (plasma)'],
    methodology: 'NGS / RT-PCR / FISH',
    clinical_use: 'Tumor-agnostic biomarker — NTRK fusions found across >25 tumor types (rare, ~1% overall). Guides larotrectinib and entrectinib therapy (FDA tumor-agnostic approvals). NCCN recommends NTRK testing for all advanced solid tumors.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Comprehensive genomic profiling', 'Tumor-agnostic biomarker panel'],
    moldx_coverage: 'covered_national',
    ncd_lcd_reference: 'NCD 90.2',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '0364U',
    short_description: 'MRD by NGS (clonoSEQ)',
    long_description: 'Oncology (hematolymphoid neoplasm), genomic sequence analysis of rearranged immunoglobulin light and heavy chain gene segments, measurable (minimal) residual disease, utilizing next-generation sequencing — clonoSEQ',
    category: 'molecular_genomic',
    subcategory: 'Measurable Residual Disease',
    cms_national_rate_2025: 2106.0,
    private_payer_avg_rate: 3200.0,
    specimen_type: ['Bone marrow aspirate', 'Peripheral blood'],
    methodology: 'Next-generation sequencing (NGS) — immunoglobulin gene rearrangement tracking',
    clinical_use: 'MRD detection in multiple myeloma, ALL, and CLL. FDA-cleared for MRD assessment with sensitivity to 10^-6. MRD negativity is a prognostic indicator and emerging endpoint for treatment decisions.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory (Adaptive Biotechnologies CLIA lab)',
    common_panels: ['clonoSEQ MRD'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L38043',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81408',
    short_description: 'Molecular pathology Level 9 (WES)',
    long_description: 'Molecular pathology procedure, Level 9 (e.g., analysis of whole exome sequence)',
    category: 'molecular_genomic',
    subcategory: 'General Molecular',
    cms_national_rate_2025: 1332.0,
    private_payer_avg_rate: 2000.0,
    specimen_type: ['Peripheral blood', 'FFPE tissue', 'Bone marrow'],
    methodology: 'Next-generation sequencing (whole exome sequencing)',
    clinical_use: 'Comprehensive exome analysis for undiagnosed genetic conditions, rare disease diagnosis, and complex oncology cases. Interrogates all protein-coding regions (~22,000 genes). Often paired with parental (trio) analysis for pediatric genetics.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Clinical WES', 'Diagnostic exome'],
    moldx_coverage: 'gap_fill',
    ncd_lcd_reference: 'Contractor-specific LCDs',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81425',
    short_description: 'Whole genome sequencing (germline)',
    long_description: 'Genome (e.g., unexplained constitutional or heritable disorder or) sequence analysis',
    category: 'molecular_genomic',
    subcategory: 'Whole Genome',
    cms_national_rate_2025: 4048.0,
    private_payer_avg_rate: 5500.0,
    specimen_type: ['Peripheral blood', 'Saliva'],
    methodology: 'Next-generation sequencing (whole genome sequencing)',
    clinical_use: 'Most comprehensive genomic analysis — interrogates coding and non-coding regions, structural variants, CNVs, repeat expansions. Used for undiagnosed rare diseases when exome is negative, pediatric genetics, and pharmacogenomics. Increasing adoption as sequencing costs decline.',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory',
    common_panels: ['Clinical WGS', 'Genome analysis'],
    moldx_coverage: 'covered_moldx',
    ncd_lcd_reference: 'MolDx LCD L38550',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '81443',
    short_description: 'Multi-cancer early detection (Galleri)',
    long_description: 'Genomic sequence analysis panel, multi-cancer early detection, cell-free DNA, utilizing whole-genome bisulfite sequencing and machine learning',
    category: 'molecular_genomic',
    subcategory: 'Multi-Cancer Early Detection',
    cms_national_rate_2025: 949.0,
    private_payer_avg_rate: 949.0,
    specimen_type: ['Peripheral blood (plasma)'],
    methodology: 'Cell-free DNA whole-genome bisulfite sequencing + methylation pattern machine learning classifier',
    clinical_use: 'Multi-cancer early detection (MCED) test — screens for 50+ cancer types from a single blood draw by detecting tumor-derived cfDNA methylation signatures. Includes cancer signal origin prediction. Not yet CMS-covered; Medicare coverage expected pending PATHWAYS Act and ongoing clinical trial results (NHS-Galleri, STRIVE, SUMMIT).',
    test_complexity: 'high',
    clia_requirement: 'High complexity laboratory (GRAIL CLIA lab)',
    common_panels: ['Galleri'],
    moldx_coverage: 'not_covered',
    ncd_lcd_reference: 'No NCD/LCD — coverage under review, PATHWAYS Act pending',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // HEMATOLOGY (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '85027',
    short_description: 'CBC without differential',
    long_description: 'Blood count; complete (CBC), automated',
    category: 'hematology',
    subcategory: 'Complete Blood Count',
    cms_national_rate_2025: 6.38,
    private_payer_avg_rate: 11.0,
    specimen_type: ['Whole blood (EDTA)'],
    methodology: 'Automated hematology analyzer (impedance / flow cytometry)',
    clinical_use: 'Basic CBC without WBC differential. Provides WBC count, RBC count, hemoglobin, hematocrit, platelet count, and RBC indices (MCV, MCH, MCHC). Used when differential is not clinically needed. Lower cost alternative to 85025.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['CBC'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
  {
    cpt_code: '85049',
    short_description: 'Platelet count',
    long_description: 'Platelet count, automated',
    category: 'hematology',
    subcategory: 'Platelet Studies',
    cms_national_rate_2025: 4.39,
    private_payer_avg_rate: 8.0,
    specimen_type: ['Whole blood (EDTA)'],
    methodology: 'Automated hematology analyzer (impedance / optical)',
    clinical_use: 'Standalone platelet count when full CBC is not needed. Monitoring thrombocytopenia (HIT, ITP, TTP, chemotherapy-induced), thrombocytosis evaluation, and anticoagulation therapy monitoring. Critical for platelet transfusion threshold decisions (<10,000/uL).',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Platelet monitoring', 'HIT workup'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },

  // ═══════════════════════════════════════════════════════════
  // MICROBIOLOGY (additional)
  // ═══════════════════════════════════════════════════════════
  {
    cpt_code: '87070',
    short_description: 'Culture, bacterial (any source)',
    long_description: 'Culture, bacterial; any other source except urine, blood or stool, aerobic, with isolation and presumptive identification of isolates',
    category: 'microbiology',
    subcategory: 'Bacterial Culture',
    cms_national_rate_2025: 9.29,
    private_payer_avg_rate: 16.0,
    specimen_type: ['Wound swab', 'Sputum', 'Body fluid', 'Tissue', 'Abscess aspirate'],
    methodology: 'Conventional culture (agar plate incubation) with Gram stain and colony identification (MALDI-TOF / biochemical)',
    clinical_use: 'General bacterial culture for wound infections, respiratory infections, abscess, and body fluid analysis. Isolates organisms for antimicrobial susceptibility testing (AST). Gold standard for definitive bacterial identification despite 24-48 hour turnaround.',
    test_complexity: 'moderate',
    clia_requirement: 'Moderate complexity',
    common_panels: ['Wound culture panel', 'Respiratory culture panel'],
    moldx_coverage: 'not_applicable',
    effective_date: '2025-01-01',
    source: 'CMS CLFS 2025',
  },
];

// ────────────────────────────────────────────────────────────
// HELPER FUNCTIONS
// ────────────────────────────────────────────────────────────

/** Get all CPT codes for a specific category */
export function getCPTByCategory(category: CPTCategory): CPTCodeEntry[] {
  return CPT_CODE_DATABASE.filter((c) => c.category === category);
}

/** Search CPT codes by keyword (searches code, description, clinical use) */
export function searchCPTCodes(query: string): CPTCodeEntry[] {
  const q = query.toLowerCase();
  return CPT_CODE_DATABASE.filter(
    (c) =>
      c.cpt_code.includes(q) ||
      c.short_description.toLowerCase().includes(q) ||
      c.long_description.toLowerCase().includes(q) ||
      c.clinical_use.toLowerCase().includes(q) ||
      c.methodology.toLowerCase().includes(q)
  );
}

/** Get CPT codes relevant to a specific biomarker name */
export function getCPTForBiomarker(biomarkerName: string): CPTCodeEntry[] {
  const q = biomarkerName.toLowerCase();
  return CPT_CODE_DATABASE.filter(
    (c) =>
      c.short_description.toLowerCase().includes(q) ||
      c.clinical_use.toLowerCase().includes(q) ||
      c.common_panels.some((p) => p.toLowerCase().includes(q))
  );
}

/** Get all MolDx-covered tests */
export function getMolDxCoveredTests(): CPTCodeEntry[] {
  return CPT_CODE_DATABASE.filter(
    (c) =>
      c.moldx_coverage === 'covered_national' ||
      c.moldx_coverage === 'covered_moldx' ||
      c.moldx_coverage === 'covered_mac_lcd'
  );
}

/** Get CPT suggestions for autocomplete (returns SuggestionItem-compatible objects) */
export function getCPTSuggestions(): { name: string; category: string; detail: string }[] {
  return CPT_CODE_DATABASE.map((c) => ({
    name: `${c.cpt_code} — ${c.short_description}`,
    category: c.subcategory,
    detail: c.cms_national_rate_2025 > 0
      ? `$${c.cms_national_rate_2025.toFixed(2)} CMS rate`
      : 'Unlisted / contractor-priced',
  }));
}
